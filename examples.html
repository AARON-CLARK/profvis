<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Examples</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/htmlwidgets-0.6/htmlwidgets.js"></script>
<script src="site_libs/d3-3.5.6/d3.min.js"></script>
<link href="site_libs/profvis-0.3.0/profvis.css" rel="stylesheet" />
<script src="site_libs/profvis-0.3.0/profvis.js"></script>
<link href="site_libs/highlight-6.2.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlight-6.2.0/highlight.js"></script>
<script src="site_libs/profvis-binding-0.3.0/profvis.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<link rel="stylesheet"
      href="site_libs/highlight/textmate.css"
      type="text/css" />
<script src="site_libs/highlight/highlight.js"></script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>

<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Profvis</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Introduction</a>
</li>
<li>
  <a href="examples.html">Examples</a>
</li>
<li>
  <a href="rstudio.html">RStudio</a>
</li>
<li>
  <a href="faq.html">FAQ</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rstudio/profvis/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Examples</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#example-1">Example 1</a></li>
<li><a href="#example-2">Example 2</a></li>
</ul>
</div>

<p>Below are some examples of profvis in use. Keep in mind that R’s sampling profiler is non-deterministic, and that the code in these examples is run and profiled when this knitr document is executed, so the numeric timing values may not exactly match the text.</p>
<div id="example-1" class="section level3">
<h3>Example 1</h3>
<p>In this first example, we’ll work with a data frame that has 151 columns. One of the columns contains an ID, and the other 150 columns contain numeric values. What we will do is, for each numeric column, take the mean and subtract it from the column, so that the new mean value of the column is zero.</p>
<pre class="r"><code># Generate data
times &lt;- 4e5
cols &lt;- 150
data &lt;- as.data.frame(x = matrix(rnorm(times * cols, mean = 5), ncol = cols))
data &lt;- cbind(id = paste0(&quot;g&quot;, seq_len(times)), data)

profvis({
  data1 &lt;- data   # Store in another variable for this run

  # Get column means
  means &lt;- apply(data1[, names(data1) != &quot;id&quot;], 2, mean)

  # Subtract mean from each column
  for (i in seq_along(means)) {
    data1[, names(data1) != &quot;id&quot;][, i] &lt;- data1[, names(data1) != &quot;id&quot;][, i] - means[i]
  }
})</code></pre>
<div id="htmlwidget-9140" style="width:100%;height:450px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-9140">{"x":{"message":{"prof":{"time":[1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,8,8,8,8,9,9,9,9,10,10,10,10,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,22,22,22,22,23,23,23,23,24,24,24,24,25,25,25,25,26,26,26,26,27,27,27,27,28,28,28,28,29,29,29,29,30,30,30,30,31,31,31,31,32,32,32,32,33,33,33,33,34,34,34,34,35,35,35,35,36,36,36,36,37,37,37,38,38,38,39,39,39,40,40,40,41,41,41,42,42,42,43,43,43,44,44,44,45,45,45,46,46,46,47,47,47,48,48,48,49,49,49,50,50,50,51,51,51,52,52,52,53,53,53,54,54,54,55,55,55,56,56,56,57,57,57,58,58,58,59,59,59,60,60,60,61,61,61,62,62,62,63,63,63,64,64,64,65,65,65,66,66,66,67,67,67,68,68,68,69,69,69,70,70,70,71,71,71,72,72,72,73,73,73,74,74,74,75,75,75,76,76,76,77,77,77,78,78,78,79,79,79,80,80,80,81,81,81,82,82,82,83,83,83,84,84,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,105,106,106,107,107,108,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,129,130,130,131,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,152,153,153,154,154,155,155,156,156,157,157,158,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,183,184,185,185,186,187,187,188,188,188,188,189,190,190,190,191,192,193,193,193,193,193,193,193,193,194,194,194,194,194,194,194,194,195,195,195,195,195,195,195,195,196,196,196,196,196,196,196,196,197,197,197,197,197,197,197,197,198,199,199,199,200,200,201,202,203,204,204,204,205,205,205,205,205,206,206,207,208,209,209,210,211,212,212,213,214,214,214,214,214,214,215,215,216,217,218,218,219,220,221,222,223,224,224,224,225,226,227,228,229,229,230,231,231,231,232,233,233,233,233,233,233,234,235,235,236,237,237,238,239,239,240,241,242,242,243,244,244,245,245,245,245,245,245,245,246,246,246,246,246,246,246,247,247,247,247,247,247,247,248,248,248,248,248,248,248,249,249,249,249,249,249,249,250,250,250,250,250,250,250,251,252,253,253,254,255,255,255,256,257,258],"depth":[4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,2,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,2,1,1,2,1,4,3,2,1,1,3,2,1,1,1,8,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1,1,3,2,1,2,1,1,1,1,3,2,1,5,4,3,2,1,2,1,1,1,2,1,1,1,2,1,1,6,5,4,3,2,1,2,1,1,1,2,1,1,1,1,1,1,3,2,1,1,1,1,1,2,1,1,3,2,1,1,6,5,4,3,2,1,1,2,1,1,2,1,1,2,1,1,1,2,1,1,2,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1,1,1,2,1,1,3,2,1,1,1,1],"label":["unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","<GC>","aperm.default","aperm","apply","<GC>","aperm.default","aperm","apply","<GC>","aperm.default","aperm","apply","<GC>","aperm.default","aperm","apply","<GC>","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","<GC>","apply","<GC>","apply","<GC>","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","-","[<-.data.frame","[<-","-","[<-.data.frame","[<-","-","[<-.data.frame","[<-","is.factor","order","[<-.data.frame","[<-","-","order","[<-.data.frame","[<-","-","-","<GC>","is.function","match.fun","lapply","unlist","order","[<-.data.frame","[<-","<GC>","is.function","match.fun","lapply","unlist","order","[<-.data.frame","[<-","<GC>","is.function","match.fun","lapply","unlist","order","[<-.data.frame","[<-","<GC>","is.function","match.fun","lapply","unlist","order","[<-.data.frame","[<-","<GC>","is.function","match.fun","lapply","unlist","order","[<-.data.frame","[<-","-","order","[<-.data.frame","[<-","[<-.data.frame","[<-","-","-","-","order","[<-.data.frame","[<-","<GC>","length","order","[<-.data.frame","[<-","[<-.data.frame","[<-","-","-","[<-.data.frame","[<-","-","-","[<-.data.frame","[<-","-","<GC>","lapply","unlist","order","[<-.data.frame","[<-","[<-.data.frame","[<-","-","-","[<-.data.frame","[<-","-","-","-","-","-","<GC>","[<-.data.frame","[<-","-","-","-","-","[<-.data.frame","[<-","-",".subset","[.data.frame","[","-","<GC>","length","FUN","vapply","[<-.data.frame","[<-","-","[<-.data.frame","[<-","-","[<-.data.frame","[<-","-","[<-.data.frame","[<-","-","-","[<-.data.frame","[<-","-","[<-.data.frame","[<-","<GC>","FUN","lapply","unlist","order","[<-.data.frame","[<-","<GC>","FUN","lapply","unlist","order","[<-.data.frame","[<-","<GC>","FUN","lapply","unlist","order","[<-.data.frame","[<-","<GC>","FUN","lapply","unlist","order","[<-.data.frame","[<-","<GC>","FUN","lapply","unlist","order","[<-.data.frame","[<-","<GC>","FUN","lapply","unlist","order","[<-.data.frame","[<-","-","-","[<-.data.frame","[<-","-","order","[<-.data.frame","[<-","-","-","-"],"filenum":[null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,null,1,null,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,null,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,null,1,null,1,null,1,null,1,null,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,1,1,1,null,1,1,1,1,null,null,null,null,null,null,1,1,null,null,null,null,null,null,1,1,null,null,null,null,null,null,1,1,null,null,null,null,null,null,1,1,null,null,null,null,null,null,1,1,1,null,1,1,1,1,1,1,1,null,1,1,null,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,1,1,1,1,1,1,1,null,1,1,1,null,null,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,null,null,null,1,1,null,null,null,null,null,1,1,null,null,null,null,null,1,1,null,null,null,null,null,1,1,null,null,null,null,null,1,1,null,null,null,null,null,1,1,1,1,1,1,1,null,1,1,1,1,1],"linenum":[null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,null,11,null,11,null,11,null,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,null,11,null,11,null,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,null,11,null,11,null,11,null,11,null,11,null,11,null,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,15,15,15,15,15,15,15,15,15,null,null,15,15,15,null,15,15,15,15,null,null,null,null,null,null,15,15,null,null,null,null,null,null,15,15,null,null,null,null,null,null,15,15,null,null,null,null,null,null,15,15,null,null,null,null,null,null,15,15,15,null,15,15,15,15,15,15,15,null,15,15,null,null,null,15,15,15,15,15,15,15,15,15,15,15,15,15,null,null,null,null,15,15,15,15,15,15,15,15,15,15,15,15,15,null,15,15,15,15,15,15,15,15,15,null,15,15,15,null,null,null,null,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,null,null,null,null,null,15,15,null,null,null,null,null,15,15,null,null,null,null,null,15,15,null,null,null,null,null,15,15,null,null,null,null,null,15,15,null,null,null,null,null,15,15,15,15,15,15,15,null,15,15,15,15,15],"memalloc":[930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.682807922363,930.684303283691,930.684303283691,930.684303283691,930.684303283691,930.620094299316,930.620094299316,930.620094299316,930.620094299316,930.620094299316,930.620094299316,930.620094299316,930.620094299316,930.620094299316,930.620094299316,930.620094299316,930.620094299316,930.620056152344,930.620056152344,930.620056152344,930.620056152344,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1388.38372802734,1408.23958587646,1426.55032348633,1438.75749969482,1454.016456604,1469.27541351318,1479.95673370361,1495.21562957764,1504.37104797363,1515.05228424072,1525.73360443115,1540.99250030518,1553.19967651367,1568.45863342285,1579.13995361328,1591.34706878662,1602.02838897705,1617.28734588623,1632.54624176025,1644.75341796875,1660.01237487793,1667.6418762207,1667.6418762207,1621.85089111328,1621.85089111328,1537.92755126953,1537.92755126953,1449.42657470703,1449.42657470703,1400.59560394287,1420.43225860596,1438.74297332764,1454.00193023682,1464.68318939209,1476.89036560059,1492.14932250977,1507.40827941895,1522.66723632812,1533.3484954834,1545.55567169189,1560.81462860107,1571.4959487915,1586.75484466553,1598.96202087402,1614.2209777832,1621.85045623779,1637.10941314697,1652.36837005615,1667.62732696533,1637.10977172852,1637.10977172852,1540.97940063477,1540.97940063477,1454.00430297852,1454.00430297852,1400.59587860107,1423.48431396484,1441.79508972168,1457.05404663086,1472.31300354004,1487.57196044922,1502.8309173584,1518.08987426758,1530.29698944092,1545.5559463501,1556.23720550537,1568.44438171387,1580.65158081055,1594.38459777832,1609.6435546875,1624.90251159668,1637.10968780518,1644.73916625977,1655.42042541504,1667.62760162354,1667.62762451172,1667.62762451172,1667.62762451172,1667.62762451172,1667.62762451172,1667.62762451172,1629.48065185547,1629.48065185547,1559.29022216797,1559.29022216797,1484.52215576172,1484.52215576172,1406.70233154297,1406.70233154297,1400.59604644775,1420.43270111084,1438.74341583252,1449.42473602295,1461.63185119629,1472.31311035156,1484.52028656006,1499.77924346924,1515.03820037842,1530.2971572876,1540.97847747803,1553.18559265137,1565.39279174805,1576.07402801514,1591.33298492432,1602.01430511475,1614.22142028809,1629.48037719727,1637.10985565186,1652.36881256104,1667.62776947021,1682.88672637939,1698.14568328857,1711.88913726807,1719.46527099609,1719.46527099609,1729.77561950684,1737.07782745361,1737.07782745361,1747.47299194336,1754.58821105957,1754.58821105957,1761.83815002441,1761.83815002441,1761.83815002441,1761.83815002441,1768.70983886719,1772.59368133545,1772.59368133545,1772.59368133545,1779.3282623291,1786.40721130371,1783.67246246338,1783.67246246338,1783.67246246338,1783.67246246338,1783.67246246338,1783.67246246338,1783.67246246338,1783.67246246338,1690.59384918213,1690.59384918213,1690.59384918213,1690.59384918213,1690.59384918213,1690.59384918213,1690.59384918213,1690.59384918213,1608.19638824463,1608.19638824463,1608.19638824463,1608.19638824463,1608.19638824463,1608.19638824463,1608.19638824463,1608.19638824463,1524.27304840088,1524.27304840088,1524.27304840088,1524.27304840088,1524.27304840088,1524.27304840088,1524.27304840088,1524.27304840088,1461.27083587646,1461.27083587646,1461.27083587646,1461.27083587646,1461.27083587646,1461.27083587646,1461.27083587646,1461.27083587646,1470.94618988037,1481.44441223145,1481.44441223145,1481.44441223145,1495.48830413818,1495.48830413818,1505.85321807861,1513.41988372803,1523.55059051514,1531.06294250488,1531.06294250488,1531.06294250488,1536.0534362793,1536.0534362793,1536.0534362793,1536.0534362793,1536.0534362793,1534.20223236084,1534.20223236084,1544.78381347656,1552.35047912598,1562.63436126709,1562.63436126709,1573.099609375,1580.66627502441,1591.15436553955,1591.15436553955,1601.41540527344,1602.81596374512,1602.81596374512,1602.81596374512,1602.81596374512,1602.81596374512,1602.81596374512,1601.45407867432,1601.45407867432,1612.03324890137,1619.59991455078,1629.78117370605,1629.78117370605,1636.8095703125,1644.37623596191,1654.50694274902,1661.58589172363,1669.15255737305,1666.24216461182,1666.24216461182,1666.24216461182,1669.1452331543,1679.76365661621,1689.89436340332,1696.97331237793,1704.33544921875,1704.33544921875,1714.67068481445,1722.23403930664,1722.23403930664,1722.23403930664,1732.36805725098,1739.46934509277,1739.46934509277,1739.46934509277,1739.46934509277,1739.46934509277,1739.46934509277,1731.18947601318,1738.49579620361,1738.49579620361,1748.88684844971,1756.43002319336,1756.43002319336,1766.58422088623,1770.26739501953,1770.26739501953,1777.20264434814,1781.22983551025,1787.92082214355,1787.92082214355,1794.90001678467,1798.64668273926,1798.64668273926,1798.86930847168,1798.86930847168,1798.86930847168,1798.86930847168,1798.86930847168,1798.86930847168,1798.86930847168,1798.86930847168,1798.86930847168,1798.86930847168,1798.86930847168,1798.86930847168,1798.86930847168,1798.86930847168,1798.86930847168,1798.86930847168,1798.86930847168,1798.86930847168,1798.86930847168,1798.86930847168,1798.86930847168,1341.10563659668,1341.10563659668,1341.10563659668,1341.10563659668,1341.10563659668,1341.10563659668,1341.10563659668,883.34196472168,883.34196472168,883.34196472168,883.34196472168,883.34196472168,883.34196472168,883.34196472168,872.688934326172,872.688934326172,872.688934326172,872.688934326172,872.688934326172,872.688934326172,872.688934326172,879.338066101074,886.904731750488,897.217147827148,897.217147827148,907.653861999512,914.783363342285,914.783363342285,914.783363342285,925.351234436035,932.430183410645,939.509132385254],"meminc":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.001495361328125,0,0,0,-0.064208984375,0,0,0,0,0,0,0,0,0,0,0,-3.814697265625e-05,0,0,0,457.763671875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19.8558578491211,18.3107376098633,12.2071762084961,15.2589569091797,15.2589569091797,10.6813201904297,15.2588958740234,9.15541839599609,10.6812362670898,10.6813201904297,15.2588958740234,12.2071762084961,15.2589569091797,10.6813201904297,12.2071151733398,10.6813201904297,15.2589569091797,15.2588958740234,12.2071762084961,15.2589569091797,7.62950134277344,0,-45.7909851074219,0,-83.92333984375,0,-88.5009765625,0,-48.8309707641602,19.8366546630859,18.3107147216797,15.2589569091797,10.6812591552734,12.2071762084961,15.2589569091797,15.2589569091797,15.2589569091797,10.6812591552734,12.2071762084961,15.2589569091797,10.6813201904297,15.2588958740234,12.2071762084961,15.2589569091797,7.62947845458984,15.2589569091797,15.2589569091797,15.2589569091797,-30.5175552368164,0,-96.13037109375,0,-86.97509765625,0,-53.4084243774414,22.8884353637695,18.3107757568359,15.2589569091797,15.2589569091797,15.2589569091797,15.2589569091797,15.2589569091797,12.2071151733398,15.2589569091797,10.6812591552734,12.2071762084961,12.2071990966797,13.7330169677734,15.2589569091797,15.2589569091797,12.2071762084961,7.62947845458984,10.6812591552734,12.2071762084961,2.288818359375e-05,0,0,0,0,0,-38.14697265625,0,-70.1904296875,0,-74.76806640625,0,-77.81982421875,0,-6.10628509521484,19.8366546630859,18.3107147216797,10.6813201904297,12.2071151733398,10.6812591552734,12.2071762084961,15.2589569091797,15.2589569091797,15.2589569091797,10.6813201904297,12.2071151733398,12.2071990966797,10.6812362670898,15.2589569091797,10.6813201904297,12.2071151733398,15.2589569091797,7.62947845458984,15.2589569091797,15.2589569091797,15.2589569091797,15.2589569091797,13.7434539794922,7.57613372802734,0,10.3103485107422,7.30220794677734,0,10.3951644897461,7.11521911621094,0,7.24993896484375,0,0,0,6.87168884277344,3.88384246826172,0,0,6.73458099365234,7.07894897460938,-2.73474884033203,0,0,0,0,0,0,0,-93.07861328125,0,0,0,0,0,0,0,-82.3974609375,0,0,0,0,0,0,0,-83.92333984375,0,0,0,0,0,0,0,-63.0022125244141,0,0,0,0,0,0,0,9.67535400390625,10.4982223510742,0,0,14.0438919067383,0,10.3649139404297,7.56666564941406,10.1307067871094,7.51235198974609,0,0,4.99049377441406,0,0,0,0,-1.85120391845703,0,10.5815811157227,7.56666564941406,10.2838821411133,0,10.4652481079102,7.56666564941406,10.4880905151367,0,10.2610397338867,1.40055847167969,0,0,0,0,0,-1.36188507080078,0,10.5791702270508,7.56666564941406,10.1812591552734,0,7.02839660644531,7.56666564941406,10.1307067871094,7.07894897460938,7.56666564941406,-2.91039276123047,0,0,2.90306854248047,10.6184234619141,10.1307067871094,7.07894897460938,7.36213684082031,0,10.3352355957031,7.5633544921875,0,0,10.1340179443359,7.10128784179688,0,0,0,0,0,-8.27986907958984,7.30632019042969,0,10.3910522460938,7.54317474365234,0,10.1541976928711,3.68317413330078,0,6.93524932861328,4.02719116210938,6.69098663330078,0,6.97919464111328,3.74666595458984,0,0.222625732421875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-457.763671875,0,0,0,0,0,0,-457.763671875,0,0,0,0,0,0,-10.6530303955078,0,0,0,0,0,0,6.64913177490234,7.56666564941406,10.3124160766602,0,10.4367141723633,7.12950134277344,0,0,10.56787109375,7.07894897460938,7.07894897460938],"filename":[null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>",null,"<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>",null,null,null,null,null,null,"<expr>","<expr>",null,null,null,null,null,null,"<expr>","<expr>",null,null,null,null,null,null,"<expr>","<expr>",null,null,null,null,null,null,"<expr>","<expr>",null,null,null,null,null,null,"<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,null,"<expr>","<expr>",null,null,null,null,null,"<expr>","<expr>",null,null,null,null,null,"<expr>","<expr>",null,null,null,null,null,"<expr>","<expr>",null,null,null,null,null,"<expr>","<expr>",null,null,null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>"]},"interval":10,"files":[{"filename":"<expr>","content":"# Generate data\ntimes <- 4e5\ncols <- 150\ndata <- as.data.frame(x = matrix(rnorm(times * cols, mean = 5), ncol = cols))\ndata <- cbind(id = paste0(\"g\", seq_len(times)), data)\n\nprofvis({\n  data1 <- data   # Store in another variable for this run\n\n  # Get column means\n  means <- apply(data1[, names(data1) != \"id\"], 2, mean)\n\n  # Subtract mean from each column\n  for (i in seq_along(means)) {\n    data1[, names(data1) != \"id\"][, i] <- data1[, names(data1) != \"id\"][, i] - means[i]\n  }\n})","normpath":"<expr>"}],"prof_output":"/var/folders/fz/v6wfsg2x1fb1rw4f6r0x4jwm0000gn/T//RtmpgyIRys/file10955ff7d0a.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>Most of the time is spent in the <code>apply</code> call, so that’s the best candidate for a first pass at optimization. We can also see that the <code>apply</code> results in a lot of memory being allocated and deallocated. Memory “churning” is often a cause for performance problems.</p>
<p>Looking at the flame graph, we can see that <code>apply</code> calls <code>as.matrix</code> and <code>aperm</code>. These two functions convert the data frame to a matrix and transpose it – so even before we’ve done any useful computations, we’ve spent a large amount of time transforming the data.</p>
<p>We could try to speed this up in a number of ways. One possibility is that we could simply leave the data in matrix form (instead of putting it in a data frame in line 4). That would remove the need for the <code>as.matrix</code> call, but it would still require <code>aperm</code> to transpose the data. It would also lose the connection of each row to the <code>id</code> column, which is undesirable. In any case, using <code>apply</code> over columns looks like it will be expensive because of the call to <code>aperm</code>.</p>
<p>An obvious alternative is to use the <code>colMeans</code> function. But there’s also another possibility. Data frames are implemented as lists of vectors, where each column is one vector, so we could use <code>lapply</code> or <code>vapply</code> to apply the <code>mean</code> function over each column. Let’s compare the speed of these four different ways of getting column means.</p>
<pre class="r"><code>profvis({
  data1 &lt;- data
  # Four different ways of getting column means
  means &lt;- apply(data1[, names(data1) != &quot;id&quot;], 2, mean)
  means &lt;- colMeans(data1[, names(data1) != &quot;id&quot;])
  means &lt;- lapply(data1[, names(data1) != &quot;id&quot;], mean)
  means &lt;- vapply(data1[, names(data1) != &quot;id&quot;], mean, numeric(1))
})</code></pre>
<div id="htmlwidget-972" style="width:100%;height:450px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-972">{"x":{"message":{"prof":{"time":[1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,8,8,8,8,9,9,9,9,10,10,10,10,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,22,22,22,22,23,23,23,23,24,24,24,24,25,25,25,25,26,26,26,26,27,27,27,27,28,28,28,28,29,29,29,29,30,30,30,30,31,31,31,32,32,32,33,33,33,34,34,34,35,35,35,36,36,36,37,37,37,38,38,38,39,39,39,40,40,40,41,41,41,42,42,42,43,43,43,44,44,44,45,45,45,46,46,46,47,47,47,48,48,48,49,49,49,50,50,50,51,51,51,52,52,52,53,53,53,54,54,54,55,55,55,56,56,56,57,57,57,58,58,58,59,59,59,60,60,60,61,61,61,62,62,62,63,63,63,64,64,64,65,65,65,66,66,66,67,67,67,68,68,68,69,69,69,70,70,70,71,71,71,72,72,72,73,73,73,74,74,74,75,75,75,76,76,76,77,77,77,78,78,78,79,80,81,82,83,84,85,86,87,88,89,90,91,91,92,92,93,93,94,94,95,95,96,96,97,97,98,98,99,99,100,100,101,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,148,149,149,150,150,151,151,152,152,153,153,154,154,155,155,156,156,157,158,158,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,187,187,187,187,188,188,188,188,188,189,189,189,189,189,190,190,190,190,190,191,191,191,191,192,192,192,192,193,193,193,193,194,194,194,194,195,195,195,195,196,196,196,196,197,197,197,197,198,198,198,198,199,199,199,199,200,200,200,200,201,201,201,201,202,202,202,202,203,203,203,203,204,204,204,204,205,205,205,205,206,206,206,206,207,207,207,207,208,208,208,208,209,209,209,209,210,210,210,210,211,211,211,211,212,212,212,212,213,213,213,213,214,214,214,214,215,215,215,215,216,216,216,216,217,217,217,217,218,218,218,218,219,219,219,219,220,220,220,220,221,221,221,221,222,223,224,225,226,227,228,228,228,229,229,229,230,230,230,231,231,231,232,232,232,233,233,233,234,234,234,235,235,235,236,236,236,237,237,237,238,238,238,239,239,239,240,240,240,241,241,241,242,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250],"depth":[4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,1,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,5,4,3,2,1,5,4,3,2,1,5,4,3,2,1,5,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,1,1,1,1,1,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1],"label":["unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","apply","mean.default","FUN","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","lazyLoadDBfetch","<GC>","unlist","as.matrix.data.frame","as.matrix","colMeans","<GC>","unlist","as.matrix.data.frame","as.matrix","colMeans","<GC>","unlist","as.matrix.data.frame","as.matrix","colMeans","<GC>","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","colMeans","colMeans","colMeans","colMeans","colMeans","colMeans","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply"],"filenum":[null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,null,1,null,1,null,1,null,1,null,1,null,1,null,1,null,1,null,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,null,1,null,1,null,1,null,1,null,1,null,1,null,1,null,1,1,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,null,null,1,null,null,null,null,1,null,null,null,null,1,null,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,1,1,1,1,1,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1],"linenum":[null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,4,4,4,4,4,4,4,4,4,4,4,4,null,4,null,4,null,4,null,4,null,4,null,4,null,4,null,4,null,4,null,4,null,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,null,4,null,4,null,4,null,4,null,4,null,4,null,4,null,4,null,4,4,null,null,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,null,null,null,null,5,null,null,null,null,5,null,null,null,null,5,null,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,5,5,5,5,5,5,null,null,6,null,null,6,null,null,6,null,null,6,null,null,6,null,null,6,null,null,6,null,null,6,null,null,6,null,null,6,null,null,6,null,null,7,null,null,7,null,null,7,null,null,7,null,null,7,null,null,7,null,null,7,null,null,7,null,null,7,null,null,7,null,null,7,null,null,7],"memalloc":[1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1388.67900848389,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1846.44414520264,1855.60075378418,1869.33377075195,1881.54094696045,1893.74814605713,1907.48122406006,1922.74011993408,1934.94729614258,1945.62861633301,1957.83573150635,1973.09468841553,1983.7759475708,1995.9831237793,2000.56084442139,2000.56084442139,2000.56084442139,2000.56084442139,2000.56084442139,2000.56084442139,1979.19738769531,1979.19738769531,1887.64465332031,1887.64465332031,1808.29895019531,1808.29895019531,1732.00500488281,1732.00500488281,1643.50402832031,1643.50402832031,1561.10656738281,1561.10656738281,1489.38256835938,1489.38256835938,1397.82983398438,1397.82983398438,1397.8078918457,1416.11860656738,1431.37758636475,1442.05888366699,1457.31777954102,1469.52495574951,1484.78391265869,1500.04286956787,1515.30182647705,1530.56078338623,1542.76798248291,1556.50106048584,1571.75995635986,1583.96713256836,1599.22608947754,1614.48504638672,1629.7440032959,1640.42532348633,1652.63243865967,1667.89139556885,1683.15035247803,1693.8316116333,1702.9870300293,1716.72004699707,1728.92722320557,1744.18618011475,1754.86750030518,1770.1263961792,1777.75593566895,1789.96305084229,1805.22200775146,1820.48096466064,1831.16222381592,1843.36940002441,1858.62835693359,1869.30967712402,1881.51679229736,1896.77574920654,1908.98294830322,1922.715965271,1931.87138366699,1945.60440063477,1957.81157684326,1973.07053375244,1985.27773284912,1999.01081085205,1965.44147491455,1965.44147491455,1919.66510772705,1919.66510772705,1875.4146194458,1875.4146194458,1829.6382522583,1829.6382522583,1779.28424835205,1779.28424835205,1698.4126663208,1698.4126663208,1611.43756866455,1611.43756866455,1539.7212600708,1539.7212600708,1463.4273147583,1463.4273147583,1397.80841827393,1416.11921691895,1416.11921691895,1416.11921691895,1435.95581054688,1451.21476745605,1461.89608764648,1477.15498352051,1489.362159729,1496.99163818359,1509.19883728027,1519.88007354736,1535.13903045654,1545.82035064697,1561.079246521,1573.28642272949,1588.54537963867,1599.22663879395,1611.43381500244,1622.11507415771,1634.32225036621,1649.58120727539,1660.26246643066,1667.89200592041,1683.15090179443,1695.35807800293,1710.61703491211,1721.29835510254,1733.50547027588,1748.76442718506,1760.97162628174,1774.72507476807,1744.22833251953,1744.22833251953,1744.22833251953,1744.22833251953,1744.22833251953,1652.67559814453,1652.67559814453,1652.67559814453,1652.67559814453,1652.67559814453,1561.12286376953,1561.12286376953,1561.12286376953,1561.12286376953,1561.12286376953,1481.77716064453,1481.77716064453,1481.77716064453,1481.77716064453,1481.77716064453,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58323669434,1855.58567810059,1855.58567810059,1855.58567810059,1855.58567810059,1855.58567810059,1855.58567810059,1855.59580230713,1855.59580230713,1855.59580230713,1855.59633636475,1855.59633636475,1855.59633636475,1855.59713745117,1855.59713745117,1855.59713745117,1855.59788513184,1855.59788513184,1855.59788513184,1855.59857940674,1855.59857940674,1855.59857940674,1855.59943389893,1855.59943389893,1855.59943389893,1855.60012817383,1855.60012817383,1855.60012817383,1855.60146331787,1855.60146331787,1855.60146331787,1855.60215759277,1855.60215759277,1855.60215759277,1855.60263824463,1855.60263824463,1855.60263824463,1855.60322570801,1855.60322570801,1855.60322570801,1855.61340332031,1855.61340332031,1855.61340332031,1855.61399078369,1855.61399078369,1855.61399078369,1855.61468505859,1855.61468505859,1855.61468505859,1855.61532592773,1855.61532592773,1855.61532592773,1855.61596679688,1855.61596679688,1855.61596679688,1855.61655426025,1855.61655426025,1855.61655426025,1855.61719512939,1855.61719512939,1855.61719512939,1855.61767578125,1855.61767578125,1855.61767578125,1855.61837005615,1855.61837005615,1855.61837005615,1855.61943817139,1855.61943817139,1855.61943817139,1855.619972229,1855.619972229,1855.619972229,1855.62077331543,1855.62077331543,1855.62077331543],"meminc":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,457.76513671875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9.15660858154297,13.7330169677734,12.2071762084961,12.2071990966797,13.7330780029297,15.2588958740234,12.2071762084961,10.6813201904297,12.2071151733398,15.2589569091797,10.6812591552734,12.2071762084961,4.57772064208984,0,0,0,0,0,-21.3634567260742,0,-91.552734375,0,-79.345703125,0,-76.2939453125,0,-88.5009765625,0,-82.3974609375,0,-71.7239990234375,0,-91.552734375,0,-0.021942138671875,18.3107147216797,15.2589797973633,10.6812973022461,15.2588958740234,12.2071762084961,15.2589569091797,15.2589569091797,15.2589569091797,15.2589569091797,12.2071990966797,13.7330780029297,15.2588958740234,12.2071762084961,15.2589569091797,15.2589569091797,15.2589569091797,10.6813201904297,12.2071151733398,15.2589569091797,15.2589569091797,10.6812591552734,9.15541839599609,13.7330169677734,12.2071762084961,15.2589569091797,10.6813201904297,15.2588958740234,7.62953948974609,12.2071151733398,15.2589569091797,15.2589569091797,10.6812591552734,12.2071762084961,15.2589569091797,10.6813201904297,12.2071151733398,15.2589569091797,12.2071990966797,13.7330169677734,9.15541839599609,13.7330169677734,12.2071762084961,15.2589569091797,12.2071990966797,13.7330780029297,-33.5693359375,0,-45.7763671875,0,-44.25048828125,0,-45.7763671875,0,-50.35400390625,0,-80.87158203125,0,-86.97509765625,0,-71.71630859375,0,-76.2939453125,0,-65.618896484375,18.3107986450195,0,0,19.8365936279297,15.2589569091797,10.6813201904297,15.2588958740234,12.2071762084961,7.62947845458984,12.2071990966797,10.6812362670898,15.2589569091797,10.6813201904297,15.2588958740234,12.2071762084961,15.2589569091797,10.6812591552734,12.2071762084961,10.6812591552734,12.2071762084961,15.2589569091797,10.6812591552734,7.62953948974609,15.2588958740234,12.2071762084961,15.2589569091797,10.6813201904297,12.2071151733398,15.2589569091797,12.2071990966797,13.7534484863281,-30.4967422485352,0,0,0,0,-91.552734375,0,0,0,0,-91.552734375,0,0,0,0,-79.345703125,0,0,0,0,373.806076049805,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.00244140625,0,0,0,0,0,0.0101242065429688,0,0,0.0005340576171875,0,0,0.00080108642578125,0,0,0.0007476806640625,0,0,0.00069427490234375,0,0,0.0008544921875,0,0,0.00069427490234375,0,0,0.00133514404296875,0,0,0.00069427490234375,0,0,0.00048065185546875,0,0,0.00058746337890625,0,0,0.0101776123046875,0,0,0.00058746337890625,0,0,0.00069427490234375,0,0,0.000640869140625,0,0,0.000640869140625,0,0,0.00058746337890625,0,0,0.000640869140625,0,0,0.00048065185546875,0,0,0.00069427490234375,0,0,0.001068115234375,0,0,0.0005340576171875,0,0,0.00080108642578125,0,0],"filename":[null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>",null,null,null,null,"<expr>",null,null,null,null,"<expr>",null,null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>"]},"interval":10,"files":[{"filename":"<expr>","content":"profvis({\n  data1 <- data\n  # Four different ways of getting column means\n  means <- apply(data1[, names(data1) != \"id\"], 2, mean)\n  means <- colMeans(data1[, names(data1) != \"id\"])\n  means <- lapply(data1[, names(data1) != \"id\"], mean)\n  means <- vapply(data1[, names(data1) != \"id\"], mean, numeric(1))\n})","normpath":"<expr>"}],"prof_output":"/var/folders/fz/v6wfsg2x1fb1rw4f6r0x4jwm0000gn/T//RtmpgyIRys/file109547a06964.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p><code>colMeans</code> is about 6x faster than using <code>apply</code> with <code>mean</code>, but it looks like it’s still using <code>as.matrix</code>, which takes a significant amount of time. <code>lapply</code>/<code>vapply</code>are faster yet – about 10x faster than <code>apply</code>. <code>lapply</code> returns the values in a list, while <code>vapply</code> returns the values in a numeric vector, which is the form that we want, so it looks like <code>vapply</code> is the way to go for this part.</p>
<p>(If you want finer-grained comparisons of code performance, you can use the <a href="https://cran.r-project.org/web/packages/microbenchmark/index.html">microbenchmark</a> package. There’s more information about microbenchmark in the <a href="http://adv-r.had.co.nz/Profiling.html#code-organisation">profiling</a> chapter of Hadley Wickham’s book, <em>Advanced R</em>.)</p>
<p>You can also see that the faster methods also result in less memory allocation and deallocation. This is not a coincidence – allocating and deallocating memory can be expensive.</p>
<p>Let’s take the original code and replace <code>apply</code> with <code>vapply</code>:</p>
<pre class="r"><code>profvis({
  data1 &lt;- data
  means &lt;- vapply(data1[, names(data1) != &quot;id&quot;], mean, numeric(1))

  for (i in seq_along(means)) {
    data1[, names(data1) != &quot;id&quot;][, i] &lt;- data1[, names(data1) != &quot;id&quot;][, i] - means[i]
  }
})</code></pre>
<div id="htmlwidget-1522" style="width:100%;height:450px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-1522">{"x":{"message":{"prof":{"time":[1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7,8,8,8,9,9,9,10,10,10,11,12,12,12,13,13,13,14,15,16,17,17,17,18,19,19,19,20,20,21,22,23,24,24,24,25,25,25,26,26,26,27,27,27,28,28,28,29,30,31,31,31,32,33,33,33,33,33,33,34,34,35,36,37,37,38,39,40,41,41,42,43,43,43,43,44,45,46,46,46,46,46,47,48,49,49,49,50,50,50,51,51,51,52,53,54,54,54,55,55,56,57,57,57,58,58,59,59,60,61,62,63,64,64,64,64,64,64,65,66,67,67,67,67,67,67,68,68,68,69],"depth":[3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,1,3,2,1,3,2,1,1,1,1,3,2,1,1,3,2,1,2,1,1,1,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,1,1,3,2,1,1,6,5,4,3,2,1,2,1,1,1,2,1,1,1,1,2,1,1,4,3,2,1,1,1,5,4,3,2,1,1,1,3,2,1,3,2,1,3,2,1,1,1,3,2,1,2,1,1,3,2,1,2,1,2,1,1,1,1,1,6,5,4,3,2,1,1,1,6,5,4,3,2,1,3,2,1,1],"label":["mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","-","order","[<-.data.frame","[<-","is.atomic","[<-.data.frame","[<-","-","-","-","<GC>","[<-.data.frame","[<-","-","order","[<-.data.frame","[<-","[<-.data.frame","[<-","-","-","-","order","[<-.data.frame","[<-","<GC>","[<-.data.frame","[<-","order","[<-.data.frame","[<-","order","[<-.data.frame","[<-","vapply","[<-.data.frame","[<-","-","-","names","[<-.data.frame","[<-","-","<GC>","lapply","unlist","order","[<-.data.frame","[<-","[<-.data.frame","[<-","-","-","[<-.data.frame","[<-","-","-","-","[<-.data.frame","[<-","-","any","order","[<-.data.frame","[<-","-","-","lapply","unlist","order","[<-.data.frame","[<-","-","-","order","[<-.data.frame","[<-","<GC>","[<-.data.frame","[<-","vapply","[<-.data.frame","[<-","-","-","order","[<-.data.frame","[<-","[<-.data.frame","[<-","-","order","[<-.data.frame","[<-","[<-.data.frame","[<-","<GC>","data1[, names(data1) != \"id\"][, i] <- data1[, names(data1) != \"id\"][, i] - means[i]","-","-","-","-","match.fun","lapply","unlist","order","[<-.data.frame","[<-","-","-","<GC>","lapply","unlist","order","[<-.data.frame","[<-","order","[<-.data.frame","[<-","-"],"filenum":[null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,1,null,1,1,null,1,1,1,1,1,null,1,1,1,null,1,1,1,1,1,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,1,1,null,1,1,1,null,null,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,1,1,1,1,null,null,null,1,1,1,1,null,1,1,null,1,1,null,1,1,1,1,null,1,1,1,1,1,null,1,1,1,1,null,1,1,1,1,1,null,null,null,null,1,1,1,1,null,null,null,null,1,1,null,1,1,1],"linenum":[null,null,3,null,null,3,null,null,3,null,null,3,null,null,3,null,null,3,null,null,3,null,null,3,null,null,3,null,null,3,6,null,6,6,null,6,6,6,6,6,null,6,6,6,null,6,6,6,6,6,6,6,null,6,6,null,6,6,null,6,6,null,6,6,null,6,6,6,6,null,6,6,6,null,null,null,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,null,6,6,6,6,null,null,null,6,6,6,6,null,6,6,null,6,6,null,6,6,6,6,null,6,6,6,6,6,null,6,6,6,6,null,6,6,6,6,6,null,null,null,null,6,6,6,6,null,null,null,null,6,6,null,6,6,6],"memalloc":[473.177688598633,473.177688598633,473.177688598633,473.178115844727,473.178115844727,473.178115844727,473.178916931152,473.178916931152,473.178916931152,473.180038452148,473.180038452148,473.180038452148,473.180679321289,473.180679321289,473.180679321289,473.181373596191,473.181373596191,473.181373596191,473.182014465332,473.182014465332,473.182014465332,473.183456420898,473.183456420898,473.183456420898,473.184150695801,473.184150695801,473.184150695801,473.184898376465,473.184898376465,473.184898376465,486.863121032715,497.843719482422,497.843719482422,497.843719482422,508.366508483887,508.366508483887,508.366508483887,518.718391418457,526.285057067871,536.903480529785,546.095947265625,546.095947265625,546.095947265625,544.315002441406,551.675422668457,551.675422668457,551.675422668457,562.483703613281,562.483703613281,573.118515014648,583.249221801758,590.815887451172,601.195335388184,601.195335388184,601.195335388184,607.20777130127,607.20777130127,607.20777130127,605.445526123047,605.445526123047,605.445526123047,615.737487792969,615.737487792969,615.737487792969,626.296165466309,626.296165466309,626.296165466309,636.891136169434,644.457801818848,655.068740844727,655.068740844727,655.068740844727,665.694648742676,671.721633911133,671.721633911133,671.721633911133,671.721633911133,671.721633911133,671.721633911133,669.539833068848,669.539833068848,680.024032592773,687.590698242188,697.882911682129,697.882911682129,708.339828491211,715.906494140625,726.524917602539,733.370819091797,733.370819091797,723.523956298828,734.117141723633,734.117141723633,734.117141723633,734.117141723633,744.273086547852,754.891510009766,762.097541809082,762.097541809082,762.097541809082,762.097541809082,762.097541809082,772.588882446289,780.155548095703,790.399131774902,790.399131774902,790.399131774902,796.365188598633,796.365188598633,796.365188598633,794.516090393066,794.516090393066,794.516090393066,801.572212219238,809.138877868652,819.673309326172,819.673309326172,819.673309326172,830.099395751953,830.099395751953,840.50643157959,847.759925842285,847.759925842285,847.759925842285,855.068054199219,855.068054199219,855.225250244141,855.225250244141,858.73900604248,866.305671691895,876.436378479004,884.003044128418,894.352821350098,894.352821350098,894.352821350098,894.352821350098,894.352821350098,894.352821350098,904.752174377441,915.370597839355,921.458641052246,921.458641052246,921.458641052246,921.458641052246,921.458641052246,921.458641052246,919.829429626465,919.829429626465,919.829429626465,930.689140319824],"meminc":[0,0,0,0.00042724609375,0,0,0.00080108642578125,0,0,0.00112152099609375,0,0,0.000640869140625,0,0,0.00069427490234375,0,0,0.000640869140625,0,0,0.00144195556640625,0,0,0.00069427490234375,0,0,0.0007476806640625,0,0,13.67822265625,10.980598449707,0,0,10.5227890014648,0,0,10.3518829345703,7.56666564941406,10.6184234619141,9.19246673583984,0,0,-1.78094482421875,7.36042022705078,0,0,10.8082809448242,0,10.6348114013672,10.1307067871094,7.56666564941406,10.3794479370117,0,0,6.01243591308594,0,0,-1.76224517822266,0,0,10.2919616699219,0,0,10.5586776733398,0,0,10.594970703125,7.56666564941406,10.6109390258789,0,0,10.6259078979492,6.02698516845703,0,0,0,0,0,-2.18180084228516,0,10.4841995239258,7.56666564941406,10.2922134399414,0,10.456916809082,7.56666564941406,10.6184234619141,6.84590148925781,0,-9.84686279296875,10.5931854248047,0,0,0,10.1559448242188,10.6184234619141,7.20603179931641,0,0,0,0,10.491340637207,7.56666564941406,10.2435836791992,0,0,5.96605682373047,0,0,-1.84909820556641,0,0,7.05612182617188,7.56666564941406,10.5344314575195,0,0,10.4260864257812,0,10.4070358276367,7.25349426269531,0,0,7.30812835693359,0,0.157196044921875,0,3.51375579833984,7.56666564941406,10.1307067871094,7.56666564941406,10.3497772216797,0,0,0,0,0,10.3993530273438,10.6184234619141,6.08804321289062,0,0,0,0,0,-1.62921142578125,0,0,10.8597106933594],"filename":[null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>"]},"interval":10,"files":[{"filename":"<expr>","content":"profvis({\n  data1 <- data\n  means <- vapply(data1[, names(data1) != \"id\"], mean, numeric(1))\n\n  for (i in seq_along(means)) {\n    data1[, names(data1) != \"id\"][, i] <- data1[, names(data1) != \"id\"][, i] - means[i]\n  }\n})","normpath":"<expr>"}],"prof_output":"/var/folders/fz/v6wfsg2x1fb1rw4f6r0x4jwm0000gn/T//RtmpgyIRys/file10957186b20.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>Our code is about 3x faster than the original version. Most of the time is now spent on line 6, and the majority of that is in the <code>[&lt;-</code> function. This is usually called with syntax <code>x[i, j] &lt;- y</code>, which is equivalent to <code>`[&lt;-`(x, i, j, y)</code>. In addition to being slow, the code is ugly: on each side of the assignment operator we’re indexing into <code>data1</code> twice with <code>[</code>.</p>
<p>In this case, it’s useful to take a step back and think about the broader problem. We want to normalize each column. Couldn’t we we apply a function over the columns that does both steps, taking the mean and subtracting it? Because a data frame is a list, and we want to assign a list of values into the data frame, we’ll need to use <code>lapply</code>.</p>
<pre class="r"><code>profvis({
  data1 &lt;- data

  # Given a column, normalize values and return them
  col_norm &lt;- function(col) {
    col - mean(col)
  }

  # Apply the normalizer function over all columns except id
  data1[, names(data1) != &quot;id&quot;] &lt;- lapply(data1[, names(data1) != &quot;id&quot;], col_norm)
})</code></pre>
<div id="htmlwidget-9432" style="width:100%;height:450px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-9432">{"x":{"message":{"prof":{"time":[1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7,8,8,8,8,9,9,9,10,10,10,11,11,11,12,12,12,13,13,13,14,14,14,15,15,15,16,16,16,17,17,17,18,18,18,19,19,19,20,20,20,21,21,21,22,22,22,23,23,23,23,24,24,24,25,25,25,26,26,26,27,27,27,28,28,28,29,29,29],"depth":[3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,4,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,4,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1],"label":["-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","mean.default","mean","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","mean.default","mean","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply"],"filenum":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"linenum":[6,5,10,6,5,10,6,5,10,6,5,10,6,5,10,6,5,10,6,5,10,null,6,5,10,6,5,10,6,5,10,6,5,10,6,5,10,6,5,10,6,5,10,6,5,10,6,5,10,6,5,10,6,5,10,6,5,10,6,5,10,6,5,10,6,5,10,null,6,5,10,6,5,10,6,5,10,6,5,10,6,5,10,6,5,10,6,5,10],"memalloc":[943.15030670166,943.15030670166,943.15030670166,955.357551574707,955.357551574707,955.357551574707,970.616607666016,970.616607666016,970.616607666016,985.875717163086,985.875717163086,985.875717163086,1004.18653106689,1004.18653106689,1004.18653106689,1019.4455871582,1019.4455871582,1019.4455871582,1037.75645446777,1037.75645446777,1037.75645446777,1053.01556396484,1053.01556396484,1053.01556396484,1053.01556396484,1071.32643127441,1071.32643127441,1071.32643127441,1086.58548736572,1086.58548736572,1086.58548736572,1104.89630126953,1104.89630126953,1104.89630126953,1120.15535736084,1120.15535736084,1120.15535736084,1135.41446685791,1135.41446685791,1135.41446685791,1153.72528076172,1153.72528076172,1153.72528076172,1168.98439025879,1168.98439025879,1168.98439025879,1184.24339294434,1184.24339294434,1184.24339294434,1196.45069122314,1196.45069122314,1196.45069122314,1208.65788269043,1208.65788269043,1208.65788269043,1220.86518096924,1220.86518096924,1220.86518096924,1239.17599487305,1239.17599487305,1239.17599487305,1254.43505096436,1254.43505096436,1254.43505096436,1269.69416046143,1269.69416046143,1269.69416046143,1284.95321655273,1284.95321655273,1284.95321655273,1284.95321655273,1300.21221923828,1300.21221923828,1300.21221923828,1315.47127532959,1315.47127532959,1315.47127532959,1330.73038482666,1330.73038482666,1330.73038482666,1349.04119873047,1349.04119873047,1349.04119873047,1364.30030822754,1364.30030822754,1364.30030822754,1376.50755310059,1376.50755310059,1376.50755310059],"meminc":[0,0,0,12.2072448730469,0,0,15.2590560913086,0,0,15.2591094970703,0,0,18.3108139038086,0,0,15.2590560913086,0,0,18.3108673095703,0,0,15.2591094970703,0,0,0,18.3108673095703,0,0,15.2590560913086,0,0,18.3108139038086,0,0,15.2590560913086,0,0,15.2591094970703,0,0,18.3108139038086,0,0,15.2591094970703,0,0,15.2590026855469,0,0,12.2072982788086,0,0,12.2071914672852,0,0,12.2072982788086,0,0,18.3108139038086,0,0,15.2590560913086,0,0,15.2591094970703,0,0,15.2590560913086,0,0,0,15.2590026855469,0,0,15.2590560913086,0,0,15.2591094970703,0,0,18.3108139038086,0,0,15.2591094970703,0,0,12.2072448730469,0,0],"filename":["<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>"]},"interval":10,"files":[{"filename":"<expr>","content":"profvis({\n  data1 <- data\n\n  # Given a column, normalize values and return them\n  col_norm <- function(col) {\n    col - mean(col)\n  }\n\n  # Apply the normalizer function over all columns except id\n  data1[, names(data1) != \"id\"] <- lapply(data1[, names(data1) != \"id\"], col_norm)\n})","normpath":"<expr>"}],"prof_output":"/var/folders/fz/v6wfsg2x1fb1rw4f6r0x4jwm0000gn/T//RtmpgyIRys/file10955a9aa9b4.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>Now we have code that’s not only about 8x faster than our original – it’s shorter and more elegant as well. Not bad! The profiler data helped us to identify performance bottlenecks, and understanding of the underlying data structures allowed us to approach the problem in a more efficient way.</p>
<p>Could we further optimize the code? It seems unlikely, given that all the time is spent in functions that are implemented in C (<code>mean</code> and <code>-</code>). That doesn’t necessarily mean that there’s no room for improvement, but this is a good place to move on to the next example.</p>
</div>
<div id="example-2" class="section level3">
<h3>Example 2</h3>
<p>This example addresses some more advanced issues. This time, it will be hard to directly see the causes of slowness, but we will be able to see some of their side-effects, most notably the side-effects from large amounts of memory allocation.</p>
<p>Suppose you have a data frame that contains a column for which you’d like to take a cumulative sum (and you don’t know about R’s built-in <code>cumsum</code> function). Here’s one way to do it:</p>
<pre class="r"><code>profvis({
  data &lt;- data.frame(value = runif(3e4))

  data$sum[1] &lt;- data$value[1]
  for (i in seq(2, nrow(data))) {
    data$sum[i] &lt;- data$sum[i-1] + data$value[i]
  }
})</code></pre>
<div id="htmlwidget-8313" style="width:100%;height:450px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-8313">{"x":{"message":{"prof":{"time":[1,2,3,4,5,6,7,8,9,10,11,12,13,13,13,14,14,14,15,15,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,29,29,29,29,29,30,30,30,30,30,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,44,44,44,44,44,44,44,45,45,45,45,45,45,45,45,46,46,46,46,46,46,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,60,60,60,60,60,60,60,61,61,61,61,61,61,61,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,75,75,75,76,76,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,89,89,90,90,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,104,105,105,106,107,108,109,110,111,112,113,114,115,116,117,118,118,118,118,118,118,118,119,119,119,119,119,119,119,120,121,122,123,124,125,126,127,128,129,130,131,132,132,132,132,132,132,132,133,133,133,133,133,133,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,147,148,148,149,150,151,152,153,154,155,156,157,157,158,159,160,161,162,162,162,163,163,163,164,164,164,165,166,167,168,169,170,171,172,173,174,175,176,177,177,177,178,178,178,179,179,179,180,181,182,183,184,185,186,186,186,186,186,187,188,189,190,191,192,192,193,193,194,195,196,197,198,199,200,201,202,203,204,205,206,206,206,206,206,207,207,207,207,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,221,222,222,223,224,225,226,227,228,229,230,231,232,233,234,235,235,235,236,236,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,250,251,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,265,265,265,265,265,266,266,266,266,266,266,267,268,269,270,271,272,273,274,275,276,277,278,279,279,280,280,281,282,283,284,285,286,287,288,289,290,291,292,293,293,293,294,294,294,295,296,297,298,299,300,301,302,303,304,305,306,307,307,307,307,307,307,308,308,308,308,308,308,309,310,311,312,313,314,315,316,317,318,319,320,321,321,321,321,322,322,322,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,336,337,337,338,338,339,340,341,342,343,344,345,346,347,348,349,350,350,351,351,352,353,354,355,356,357,358,359,360,361,362,363,364,364,364,364,364,364,365,365,365,365,365,365,366,366,366,366,366,366,367,368,369,370,371,372,373,374,375,376,377,378,379,379,379,380,380,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,394,394,394,395,395,395,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,409,409,409,409,410,410,410,410,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,424,424,425,425,425,426,427,428,429,430,431,432,433,434,435,436,437,438,438,438,439,439,439,440,440,440,441,442,443,444,445,446,447,448,449,450,451,452,453,453,453,453,453,454,454,454,454,454,455,455,455,455,455,456],"depth":[1,1,1,1,1,1,1,1,1,1,1,1,3,2,1,3,2,1,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,6,5,4,3,2,1,6,5,4,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,8,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,8,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,3,2,1,4,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,3,2,1,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,7,6,5,4,3,2,1,7,6,5,4,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,3,2,1,3,2,1,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,3,2,1,3,2,1,3,2,1,1,1,1,1,1,1,5,4,3,2,1,1,1,1,1,1,2,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,5,4,3,2,1,5,4,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,3,2,1,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,6,5,4,3,2,1,6,5,4,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,3,2,1,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,6,5,4,3,2,1,6,5,4,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,4,3,2,1,4,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,2,1,1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,3,2,1,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,3,2,1,4,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,5,4,3,2,1,5,4,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,2,1,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,3,2,1,3,2,1,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,5,4,3,2,1,5,4,3,2,1,5,4,3,2,1,1],"label":["data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","$.data.frame","$","<GC>","$.data.frame","$","<GC>","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","all","[[.data.frame","[[","$.data.frame","$","<GC>","all","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","sys.call","match","%in%","[[.data.frame","[[","$.data.frame","$","<GC>","sys.call","match","%in%","[[.data.frame","[[","$.data.frame","$","<GC>","sys.call","match","%in%","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","sys.call","match","%in%","[[.data.frame","[[","$.data.frame","$","<GC>","sys.call","match","%in%","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","$.data.frame","$","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","$.data.frame","$","<GC>","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","match","%in%","[[.data.frame","[[","$.data.frame","$","<GC>","match","%in%","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","match","%in%","[[.data.frame","[[","$.data.frame","$","<GC>","match","%in%","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","$","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","$","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","$","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","$","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<Anonymous>","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","[[.data.frame","[[","$.data.frame","$","<GC>","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","$","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","all","[[.data.frame","[[","$.data.frame","$","<GC>","all","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","$","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","<Anonymous>","[[.data.frame","[[","$.data.frame","$","<GC>","<Anonymous>","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","[[","$.data.frame","$","<GC>","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","%in%","[[.data.frame","[[","$.data.frame","$","<GC>","%in%","[[.data.frame","[[","$.data.frame","$","<GC>","%in%","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","$<-.data.frame","$<-","<GC>","$<-.data.frame","$<-","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","[[","$.data.frame","$","<GC>","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","[[.data.frame","[[","$.data.frame","$","<GC>","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","$","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","$<-.data.frame","$<-","<GC>","$<-.data.frame","$<-","<GC>","$<-.data.frame","$<-","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","[[.data.frame","[[","$.data.frame","$","<GC>","[[.data.frame","[[","$.data.frame","$","<GC>","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]"],"filenum":[1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,null,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,null,null,1,1,null,null,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,null,null,null,null,1,1,null,null,null,null,null,null,1,1,null,null,null,null,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,null,null,null,null,1,1,null,null,null,null,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,null,null,null,1,1,null,null,null,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,null,null,null,1,1,null,null,null,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,null,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,null,1,1,null,1,1,1,1,1,1,1,1,null,null,null,1,1,1,1,1,1,1,null,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,null,1,1,null,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,null,null,1,1,null,null,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,null,null,1,1,null,null,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,1,1,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,null,1,null,1,1,1,1,1,1,1,1,1,1,1,1,null,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,null,null,1,1,null,null,null,null,1,1,null,null,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,1,1,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,null,1,1,null,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,null,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,null,1,1,null,null,null,1,1,null,null,null,1,1,1],"linenum":[6,6,6,6,6,6,6,6,6,6,6,6,null,6,6,null,6,6,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,null,null,null,6,6,null,null,null,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,null,null,null,null,null,6,6,null,null,null,null,null,null,6,6,null,null,null,null,null,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,null,null,null,null,null,6,6,null,null,null,null,null,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,6,6,6,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,6,6,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,6,null,6,6,6,6,6,6,6,6,6,6,6,6,6,null,null,null,null,null,6,6,null,null,null,null,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,null,null,null,null,6,6,null,null,null,null,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,6,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,6,6,null,6,6,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,6,6,null,6,6,null,6,6,6,6,6,6,6,6,null,null,null,6,6,6,6,6,6,6,null,6,null,6,6,6,6,6,6,6,6,6,6,6,6,6,null,null,null,6,6,null,null,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,6,null,6,6,6,6,6,6,6,6,6,6,6,6,6,null,6,6,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,6,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,null,null,null,6,6,null,null,null,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,6,null,6,6,6,6,6,6,6,6,6,6,6,6,6,null,6,6,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,null,null,null,6,6,null,null,null,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,null,6,6,null,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,6,null,6,null,6,6,6,6,6,6,6,6,6,6,6,6,null,6,null,6,6,6,6,6,6,6,6,6,6,6,6,6,null,null,null,null,6,6,null,null,null,null,6,6,null,null,null,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,6,6,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,null,6,6,null,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,null,null,6,6,null,null,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,6,6,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,6,6,null,6,6,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,null,null,6,6,null,null,null,6,6,null,null,null,6,6,6],"memalloc":[947.573020935059,964.083274841309,984.033592224121,1004.21236419678,1022.32778167725,1041.1315536499,1056.4948348999,1070.02407073975,1090.43257904053,1110.15316009521,1129.64443206787,1144.09090423584,1151.88819885254,1151.88819885254,1151.88819885254,1065.82862854004,1065.82862854004,1065.82862854004,941.545791625977,941.545791625977,941.545791625977,946.652359008789,958.117813110352,976.462539672852,990.679702758789,1006.73133850098,1018.6558380127,1036.31221008301,1054.65693664551,1074.14820861816,1092.95155334473,1112.90144348145,1133.30995178223,1152.11329650879,1113.66316223145,1113.66316223145,1113.66316223145,1113.66316223145,1113.66316223145,1113.66316223145,991.669143676758,991.669143676758,991.669143676758,991.669143676758,991.669143676758,991.669143676758,944.588287353516,964.538177490234,984.029876708984,1004.43795776367,1024.15853881836,1043.64981079102,1060.3893737793,1073.23110961914,1089.97024536133,1104.87576293945,1116.34121704102,1131.47561645508,1145.92208862305,1153.25971984863,1153.25971984863,1153.25971984863,1153.25971984863,1153.25971984863,1153.25971984863,1153.25971984863,1153.25971984863,1054.61164855957,1054.61164855957,1054.61164855957,1054.61164855957,1054.61164855957,1054.61164855957,1054.61164855957,1054.61164855957,943.146194458008,943.146194458008,943.146194458008,943.146194458008,943.146194458008,943.146194458008,943.146194458008,943.146194458008,945.505729675293,963.850028991699,981.277946472168,998.93431854248,1010.17046356201,1023.69969940186,1039.98107147217,1058.32537078857,1075.98217010498,1093.18035125732,1111.52550506592,1129.41118621826,1142.48180389404,1153.0308380127,1153.0308380127,1153.0308380127,1153.0308380127,1153.0308380127,1153.0308380127,1153.0308380127,1153.0308380127,1031.49458312988,1031.49458312988,1031.49458312988,1031.49458312988,1031.49458312988,1031.49458312988,1031.49458312988,1031.49458312988,938.396141052246,955.824058532715,975.544212341309,987.010093688965,1006.04274749756,1025.07497406006,1043.42012786865,1063.5993270874,1080.10958099365,1094.3263168335,1113.35897064209,1132.85066986084,1147.98464202881,1149.59763336182,1149.59763336182,1149.59763336182,1149.59763336182,1036.53000640869,1036.53000640869,1036.53000640869,1036.53000640869,936.103355407715,956.970054626465,976.002708435059,995.035362243652,1014.75594329834,1034.47652435303,1053.27986907959,1072.31252288818,1092.03310394287,1108.31404876709,1121.6139755249,1141.56429290771,1153.48860931396,1153.48860931396,1153.48860931396,1026.23030853271,1026.23030853271,1026.23030853271,940.917930603027,960.86824798584,982.422874450684,996.181846618652,1012.23348236084,1024.15755462646,1040.43807220459,1053.50868988037,1071.62410736084,1084.46541595459,1101.20540618896,1119.7794418335,1138.35305023193,1153.71750640869,1153.71750640869,1034.69895172119,1034.69895172119,937.93643951416,956.28116607666,976.46036529541,996.63956451416,1016.58945465088,1035.16349029541,1054.65476226807,1072.99948883057,1092.03256988525,1111.29410552979,1130.5564956665,1150.27707672119,1153.94641113281,1153.94641113281,1153.94641113281,1153.94641113281,1153.94641113281,1153.94641113281,1153.94641113281,1042.02319335938,1042.02319335938,1042.02319335938,1042.02319335938,1042.02319335938,1042.02319335938,1042.02319335938,937.936012268066,957.885902404785,972.561683654785,990.906410217285,1011.08560943604,1030.34799957275,1046.85782623291,1061.76334381104,1081.71280670166,1101.66312408447,1121.38327789307,1141.10385894775,1154.17529296875,1154.17529296875,1154.17529296875,1154.17529296875,1154.17529296875,1154.17529296875,1154.17529296875,1027.83251953125,1027.83251953125,1027.83251953125,1027.83251953125,1027.83251953125,1027.83251953125,1027.83251953125,937.018859863281,956.280395507812,975.313049316406,994.804321289062,1014.75421142578,1033.32824707031,1051.90270996094,1070.01812744141,1085.84002685547,1102.58001708984,1119.08984375,1133.078125,1147.29486083984,1154.40418243408,1154.40418243408,1027.83252716064,1027.83252716064,941.833610534668,953.299491882324,969.80931854248,990.447135925293,1009.70952606201,1025.53142547607,1043.87657928467,1063.36742401123,1080.79527282715,1080.79527282715,1095.01207733154,1110.37578582764,1125.05199432373,1140.18639373779,1154.86199188232,1154.86199188232,1154.86199188232,1085.96855926514,1085.96855926514,1085.96855926514,966.034477233887,966.034477233887,966.034477233887,950.776359558105,964.993522644043,982.19213104248,1001.91228485107,1021.40398406982,1041.58275604248,1060.61540985107,1079.1898727417,1099.13976287842,1115.19097137451,1133.99431610107,1153.48558807373,1138.38251495361,1138.38251495361,1138.38251495361,1041.33661651611,1041.33661651611,1041.33661651611,931.516441345215,931.516441345215,931.516441345215,949.402839660645,969.35230255127,988.843574523926,1000.07971954346,1017.96625518799,1029.88990020752,1048.00574493408,1048.00574493408,1048.00574493408,1048.00574493408,1048.00574493408,1067.95520782471,1086.75897979736,1105.56189727783,1118.17389678955,1136.51905059814,1152.8002243042,1152.8002243042,1025.77080535889,1025.77080535889,939.542060852051,960.409187316895,972.103523254395,991.136604309082,1009.25202178955,1027.36701202393,1047.08759307861,1066.12024688721,1085.38220977783,1105.10279083252,1124.59449005127,1143.85645294189,1153.25800323486,1153.25800323486,1153.25800323486,1153.25800323486,1153.25800323486,1053.92328643799,1053.92328643799,1053.92328643799,1053.92328643799,1053.92328643799,934.725715637207,955.593269348145,972.332405090332,986.090950012207,1005.35334014893,1022.09247589111,1036.31006622314,1055.34229278564,1074.37537384033,1092.49036407471,1113.12818145752,1131.93195343018,1152.34003448486,1119.38352966309,1119.38352966309,1003.56932067871,1003.56932067871,941.834297180176,962.242805480957,974.625068664551,991.364631652832,1009.4800491333,1029.65924835205,1049.1509475708,1068.1831741333,1086.98694610596,1105.78986358643,1124.13459014893,1140.41596221924,1153.48693847656,1153.48693847656,1153.48693847656,1036.29943847656,1036.29943847656,1036.29943847656,936.101188659668,953.986869812012,973.707450866699,991.593559265137,1003.74694061279,1023.46794891357,1042.50017547607,1062.90911102295,1081.25341033936,1100.97441864014,1120.92430877686,1140.87377166748,1152.7982711792,1111.60158538818,1111.60158538818,979.536766052246,979.536766052246,948.024467468262,966.13988494873,985.401847839355,1000.07805633545,1015.67064666748,1027.82402801514,1043.18773651123,1054.65319061279,1071.85137176514,1089.50817108154,1100.97362518311,1119.31835174561,1139.72686004639,1153.9447555542,1153.9447555542,1153.9447555542,1153.9447555542,1153.9447555542,1153.9447555542,1024.85540008545,1024.85540008545,1024.85540008545,1024.85540008545,1024.85540008545,1024.85540008545,941.374603271484,962.471038818359,978.522247314453,996.408782958984,1014.52377319336,1034.47409057617,1053.7360534668,1073.68551635742,1092.48886108398,1112.89779663086,1130.09555053711,1147.98165893555,1142.50067901611,1142.50067901611,1015.92902374268,1015.92902374268,942.520408630371,963.616844177246,984.025352478027,1003.97566986084,1019.56868743896,1034.01473236084,1053.04781341553,1067.26454925537,1083.77480316162,1103.72512054443,1123.67458343506,1144.31240081787,1154.40256500244,1154.40256500244,1154.40256500244,1033.78183746338,1033.78183746338,1033.78183746338,939.310203552246,960.17733001709,977.833702087402,990.21639251709,1008.10292816162,1028.28212738037,1045.25057220459,1063.82460784912,1082.16933441162,1100.74337005615,1120.00533294678,1138.80867767334,1154.40254211426,1154.40254211426,1154.40254211426,1154.40254211426,1154.40254211426,1154.40254211426,1030.34858703613,1030.34858703613,1030.34858703613,1030.34858703613,1030.34858703613,1030.34858703613,939.997062683105,959.488761901855,979.896842956543,999.846733093262,1016.12810516357,1035.3900680542,1055.11022186279,1073.22563934326,1091.57079315186,1110.83232879639,1130.78221893311,1149.35668182373,1138.83862304688,1138.83862304688,1138.83862304688,1138.83862304688,1008.60485839844,1008.60485839844,1008.60485839844,1008.60485839844,938.621017456055,956.965744018555,971.412216186523,988.152206420898,1007.41374206543,1026.67570495605,1045.47947692871,1065.8875579834,1085.60813903809,1103.72355651855,1118.17002868652,1134.22166442871,1152.79570007324,1155.08921813965,1155.08921813965,1043.62376403809,1043.62376403809,945.662338256836,945.662338256836,951.232444763184,971.182334899902,984.252952575684,1001.221824646,1020.94240570068,1042.03884124756,1061.07149505615,1081.48000335693,1100.97127532959,1120.46297454834,1139.03658294678,1155.31816101074,1155.31816101074,1034.2396697998,1034.2396697998,941.601287841797,961.092559814453,980.583404541016,1000.76260375977,1016.35604858398,1031.49044799805,1050.9817199707,1069.55532836914,1088.3586730957,1107.3913269043,1127.57052612305,1148.20834350586,1155.77593231201,1155.77593231201,1155.77593231201,1155.77593231201,1155.77593231201,1155.77593231201,1067.42754364014,1067.42754364014,1067.42754364014,1067.42754364014,1067.42754364014,1067.42754364014,973.814872741699,973.814872741699,973.814872741699,973.814872741699,973.814872741699,973.814872741699,944.352027893066,959.486427307129,978.519081115723,999.38663482666,1018.41886138916,1036.07566070557,1054.6496963501,1073.91208648682,1094.09085845947,1113.12351226807,1133.53202056885,1152.79441070557,1131.51445007324,1131.51445007324,1131.51445007324,1013.41142272949,1013.41142272949,1013.41142272949,944.810218811035,962.696327209473,980.811744689941,998.009925842285,1010.85123443604,1024.15116119385,1043.6424331665,1062.6750869751,1081.47843170166,1101.19901275635,1115.64548492432,1131.23892974854,1150.27115631104,1156.23377227783,1156.23377227783,1156.23377227783,1156.23377227783,1046.59937286377,1046.59937286377,1046.59937286377,1046.59937286377,939.077484130859,957.192474365234,975.766937255859,995.946136474609,1015.20767211914,1026.90243530273,1045.0178527832,1064.50912475586,1083.77151489258,1101.42788696289,1113.35195922852,1133.0725402832,1151.4172668457,1151.65614318848,1151.65614318848,1151.65614318848,1151.65614318848,1151.65614318848,1034.69752502441,1034.69752502441,1034.69752502441,1034.69752502441,1034.69752502441,942.746055603027,960.861045837402,978.747581481934,997.09188079834,1012.68489837646,1028.96584320068,1042.95412445068,1059.9225692749,1078.2677230835,1098.21718597412,1109.68306732178,1127.33986663818,1147.28932952881,1156.92044830322,1156.92044830322,1156.92044830322,1052.55033111572,1052.55033111572,1052.55033111572,939.993560791016,960.631378173828,980.581268310547,998.467376708984,1016.58322143555,1036.53311157227,1055.79507446289,1075.05661010742,1093.63064575195,1113.58053588867,1129.63259887695,1143.8493347168,1157.14930725098,1157.14930725098,1157.14930725098,1106.10865783691,1106.10865783691,1106.10865783691,1009.52052307129,1009.52052307129,1009.52052307129,944.80835723877,963.15308380127,982.64478302002,1002.13562774658,1019.79242706299,1039.74231719971,1055.79395294189,1070.24042510986,1089.73169708252,1109.68158721924,1128.02631378174,1146.37104034424,1157.37826538086,1157.37826538086,1157.37826538086,1157.37826538086,1157.37826538086,1108.1686706543,1108.1686706543,1108.1686706543,1108.1686706543,1108.1686706543,1003.11190795898,1003.11190795898,1003.11190795898,1003.11190795898,1003.11190795898,948.705940246582],"meminc":[0,16.51025390625,19.9503173828125,20.1787719726562,18.1154174804688,18.8037719726562,15.36328125,13.5292358398438,20.4085083007812,19.7205810546875,19.4912719726562,14.4464721679688,7.79729461669922,0,0,-86.0595703125,0,0,-124.282836914062,0,0,5.1065673828125,11.4654541015625,18.3447265625,14.2171630859375,16.0516357421875,11.9244995117188,17.6563720703125,18.3447265625,19.4912719726562,18.8033447265625,19.9498901367188,20.4085083007812,18.8033447265625,-38.4501342773438,0,0,0,0,0,-121.994018554688,0,0,0,0,0,-47.0808563232422,19.9498901367188,19.49169921875,20.4080810546875,19.7205810546875,19.4912719726562,16.7395629882812,12.8417358398438,16.7391357421875,14.905517578125,11.4654541015625,15.1343994140625,14.4464721679688,7.33763122558594,0,0,0,0,0,0,0,-98.6480712890625,0,0,0,0,0,0,0,-111.465454101562,0,0,0,0,0,0,0,2.35953521728516,18.3442993164062,17.4279174804688,17.6563720703125,11.2361450195312,13.5292358398438,16.2813720703125,18.3442993164062,17.6567993164062,17.1981811523438,18.3451538085938,17.8856811523438,13.0706176757812,10.5490341186523,0,0,0,0,0,0,0,-121.536254882812,0,0,0,0,0,0,0,-93.0984420776367,17.4279174804688,19.7201538085938,11.4658813476562,19.0326538085938,19.0322265625,18.3451538085938,20.17919921875,16.51025390625,14.2167358398438,19.0326538085938,19.49169921875,15.1339721679688,1.61299133300781,0,0,0,-113.067626953125,0,0,0,-100.426651000977,20.86669921875,19.0326538085938,19.0326538085938,19.7205810546875,19.7205810546875,18.8033447265625,19.0326538085938,19.7205810546875,16.2809448242188,13.2999267578125,19.9503173828125,11.92431640625,0,0,-127.25830078125,0,0,-85.3123779296875,19.9503173828125,21.5546264648438,13.7589721679688,16.0516357421875,11.924072265625,16.280517578125,13.0706176757812,18.1154174804688,12.84130859375,16.739990234375,18.5740356445312,18.5736083984375,15.3644561767578,0,-119.0185546875,0,-96.7625122070312,18.3447265625,20.17919921875,20.17919921875,19.9498901367188,18.5740356445312,19.4912719726562,18.3447265625,19.0330810546875,19.2615356445312,19.2623901367188,19.7205810546875,3.66933441162109,0,0,0,0,0,0,-111.923217773438,0,0,0,0,0,0,-104.087181091309,19.9498901367188,14.67578125,18.3447265625,20.17919921875,19.2623901367188,16.5098266601562,14.905517578125,19.949462890625,19.9503173828125,19.7201538085938,19.7205810546875,13.0714340209961,0,0,0,0,0,0,-126.3427734375,0,0,0,0,0,0,-90.8136596679688,19.2615356445312,19.0326538085938,19.4912719726562,19.9498901367188,18.5740356445312,18.574462890625,18.1154174804688,15.8218994140625,16.739990234375,16.5098266601562,13.98828125,14.2167358398438,7.10932159423828,0,-126.571655273438,0,-85.9989166259766,11.4658813476562,16.5098266601562,20.6378173828125,19.2623901367188,15.8218994140625,18.3451538085938,19.4908447265625,17.427848815918,0,14.2168045043945,15.3637084960938,14.6762084960938,15.1343994140625,14.6755981445312,0,0,-68.8934326171875,0,0,-119.93408203125,0,0,-15.2581176757812,14.2171630859375,17.1986083984375,19.7201538085938,19.49169921875,20.1787719726562,19.0326538085938,18.574462890625,19.9498901367188,16.0512084960938,18.8033447265625,19.4912719726562,-15.1030731201172,0,0,-97.0458984375,0,0,-109.820175170898,0,0,17.8863983154297,19.949462890625,19.4912719726562,11.2361450195312,17.8865356445312,11.9236450195312,18.1158447265625,0,0,0,0,19.949462890625,18.8037719726562,18.8029174804688,12.6119995117188,18.3451538085938,16.2811737060547,0,-127.029418945312,0,-86.2287445068359,20.8671264648438,11.6943359375,19.0330810546875,18.1154174804688,18.114990234375,19.7205810546875,19.0326538085938,19.261962890625,19.7205810546875,19.49169921875,19.261962890625,9.40155029296875,0,0,0,0,-99.334716796875,0,0,0,0,-119.197570800781,20.8675537109375,16.7391357421875,13.758544921875,19.2623901367188,16.7391357421875,14.2175903320312,19.0322265625,19.0330810546875,18.114990234375,20.6378173828125,18.8037719726562,20.4080810546875,-32.9565048217773,0,-115.814208984375,0,-61.7350234985352,20.4085083007812,12.3822631835938,16.7395629882812,18.1154174804688,20.17919921875,19.49169921875,19.0322265625,18.8037719726562,18.8029174804688,18.3447265625,16.2813720703125,13.0709762573242,0,0,-117.1875,0,0,-100.198249816895,17.8856811523438,19.7205810546875,17.8861083984375,12.1533813476562,19.7210083007812,19.0322265625,20.408935546875,18.3442993164062,19.7210083007812,19.9498901367188,19.949462890625,11.9244995117188,-41.1966857910156,0,-132.064819335938,0,-31.5122985839844,18.1154174804688,19.261962890625,14.6762084960938,15.5925903320312,12.1533813476562,15.3637084960938,11.4654541015625,17.1981811523438,17.6567993164062,11.4654541015625,18.3447265625,20.4085083007812,14.2178955078125,0,0,0,0,0,-129.08935546875,0,0,0,0,0,-83.4807968139648,21.096435546875,16.0512084960938,17.8865356445312,18.114990234375,19.9503173828125,19.261962890625,19.949462890625,18.8033447265625,20.408935546875,17.19775390625,17.8861083984375,-5.48097991943359,0,-126.571655273438,0,-73.4086151123047,21.096435546875,20.4085083007812,19.9503173828125,15.593017578125,14.446044921875,19.0330810546875,14.2167358398438,16.51025390625,19.9503173828125,19.949462890625,20.6378173828125,10.0901641845703,0,0,-120.620727539062,0,0,-94.4716339111328,20.8671264648438,17.6563720703125,12.3826904296875,17.8865356445312,20.17919921875,16.9684448242188,18.5740356445312,18.3447265625,18.5740356445312,19.261962890625,18.8033447265625,15.593864440918,0,0,0,0,0,-124.053955078125,0,0,0,0,0,-90.3515243530273,19.49169921875,20.4080810546875,19.9498901367188,16.2813720703125,19.261962890625,19.7201538085938,18.1154174804688,18.3451538085938,19.2615356445312,19.9498901367188,18.574462890625,-10.5180587768555,0,0,0,-130.233764648438,0,0,0,-69.9838409423828,18.3447265625,14.4464721679688,16.739990234375,19.2615356445312,19.261962890625,18.8037719726562,20.4080810546875,19.7205810546875,18.1154174804688,14.4464721679688,16.0516357421875,18.5740356445312,2.29351806640625,0,-111.465454101562,0,-97.96142578125,0,5.57010650634766,19.9498901367188,13.0706176757812,16.9688720703125,19.7205810546875,21.096435546875,19.0326538085938,20.4085083007812,19.4912719726562,19.49169921875,18.5736083984375,16.2815780639648,0,-121.078491210938,0,-92.6383819580078,19.4912719726562,19.4908447265625,20.17919921875,15.5934448242188,15.1343994140625,19.4912719726562,18.5736083984375,18.8033447265625,19.0326538085938,20.17919921875,20.6378173828125,7.56758880615234,0,0,0,0,0,-88.348388671875,0,0,0,0,0,-93.6126708984375,0,0,0,0,0,-29.4628448486328,15.1343994140625,19.0326538085938,20.8675537109375,19.0322265625,17.6567993164062,18.5740356445312,19.2623901367188,20.1787719726562,19.0326538085938,20.4085083007812,19.2623901367188,-21.2799606323242,0,0,-118.10302734375,0,0,-68.601203918457,17.8861083984375,18.1154174804688,17.1981811523438,12.84130859375,13.2999267578125,19.4912719726562,19.0326538085938,18.8033447265625,19.7205810546875,14.4464721679688,15.5934448242188,19.0322265625,5.96261596679688,0,0,0,-109.634399414062,0,0,0,-107.52188873291,18.114990234375,18.574462890625,20.17919921875,19.2615356445312,11.6947631835938,18.1154174804688,19.4912719726562,19.2623901367188,17.6563720703125,11.924072265625,19.7205810546875,18.3447265625,0.238876342773438,0,0,0,0,-116.958618164062,0,0,0,0,-91.9514694213867,18.114990234375,17.8865356445312,18.3442993164062,15.593017578125,16.2809448242188,13.98828125,16.9684448242188,18.3451538085938,19.949462890625,11.4658813476562,17.6567993164062,19.949462890625,9.63111877441406,0,0,-104.3701171875,0,0,-112.556770324707,20.6378173828125,19.9498901367188,17.8861083984375,18.1158447265625,19.9498901367188,19.261962890625,19.2615356445312,18.5740356445312,19.9498901367188,16.0520629882812,14.2167358398438,13.2999725341797,0,0,-51.0406494140625,0,0,-96.588134765625,0,0,-64.7121658325195,18.3447265625,19.49169921875,19.4908447265625,17.6567993164062,19.9498901367188,16.0516357421875,14.4464721679688,19.4912719726562,19.9498901367188,18.3447265625,18.3447265625,11.0072250366211,0,0,0,0,-49.2095947265625,0,0,0,0,-105.056762695312,0,0,0,0,-54.4059677124023],"filename":["<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,null,null,"<expr>","<expr>",null,null,null,null,null,null,"<expr>","<expr>",null,null,null,null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,null,null,"<expr>","<expr>",null,null,null,null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,null,"<expr>","<expr>",null,null,null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,null,"<expr>","<expr>",null,null,null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>",null,"<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>",null,null,null,null,"<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>",null,null,null,"<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>"]},"interval":10,"files":[{"filename":"<expr>","content":"profvis({\n  data <- data.frame(value = runif(3e4))\n\n  data$sum[1] <- data$value[1]\n  for (i in seq(2, nrow(data))) {\n    data$sum[i] <- data$sum[i-1] + data$value[i]\n  }\n})","normpath":"<expr>"}],"prof_output":"/var/folders/fz/v6wfsg2x1fb1rw4f6r0x4jwm0000gn/T//RtmpgyIRys/file10953b668bdc.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>This takes over 2 seconds to calculate the cumulative sum of 30,000 items. That’s pretty slow for a computer program. Looking at the profvis visualization, we can see a number of notable features:</p>
<p>Almost all the time is spent in one line of code, line 6. Although this is just one line of code, many different functions that are called on that line.</p>
<p>That line also results in a large amount of memory being allocated and deallocated, which is somewhat suprising: just looking at the code, that line <em>appears</em> to just modify the data in-place, but that’s not actually what’s happening internally.</p>
<p>In the flame graph, you’ll see that some of the flame graph blocks have the label <code>$</code>, which means that those samples were spent in the <code>$</code> function for indexing into an object (in R, the expression <code>x$y</code> is equivalent to <code>`$`(x, &quot;y&quot;)</code>).</p>
<p>Because <code>$</code> is a <em>generic</em> function, it calls the corresponding <em>method</em> for the object, in this case <code>$.data.frame</code>. This function in turn calls <code>[[</code>, which calls <code>[[.data.frame</code>. (Zoom in to see this more clearly.)</p>
<p>Other flame graph cells have the label <code>$&lt;-</code>. The usual syntax for calling this function is <code>x$y &lt;- z</code>; this is equivalent to <code>`$&lt;-`(x, &quot;y&quot;, z)</code>. (Assignment with indexing, as in <code>x$y[i] &lt;- z</code> is actually a bit <a href="http://adv-r.had.co.nz/Functions.html#replacement-functions">more complicated</a>, and it turns out that this is the cause of the excessive memory allocation and deallocation.)</p>
<p>Finally, many of the flame graph cells contain the entire expression from line 6. This can mean one of two things:</p>
<ol style="list-style-type: decimal">
<li>R is currently evaluating the expression but is not inside another function call.</li>
<li>R is in another function, but that function does not show up on the stack. (A number of R’s internal functions do not show up in the profiling data. See <a href="#why-do-some-function-calls-not-show-in-the-profiler">more</a> about this in the FAQ.)</li>
</ol>
<p>This profiling data tells us that much of the time is spent in <code>$</code> and <code>$&lt;-</code>. Maybe avoiding these functions entirely will speed things up. To do that, instead of operating on data frame columns, we can operate on temporary vectors. As it turns out, writing a function that takes a vector as input and returns a vector as output is not only convenient; it provides a natural way of creating temporary variables so that we can avoid calling <code>$</code> and <code>$&lt;-</code> in a loop.</p>
<pre class="r"><code>profvis({
  csum &lt;- function(x) {
    if (length(x) &lt; 2) return(x)

    sum &lt;- x[1]
    for (i in seq(2, length(x))) {
      sum[i] &lt;- sum[i-1] + x[i]
    }
    sum
  }
  data$sum &lt;- csum(data$value)
})</code></pre>
<div id="htmlwidget-1821" style="width:100%;height:450px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-1821">{"x":{"message":{"prof":{"time":[1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,14,14,15,15,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,30,30,31,31,32,32,33,33,33,34,34,34,35,35,35,36,36,36,37,37,37,38,38,38,39,39,39,40,40,40,41,41,41,42,42,42,43,43,43,44,44,44,45,45,46,46,47,47,48,48,49,49,50,50,51,51,52,52,53,53,54,54,55,55,56,56,57,57,58,58,59,59,60,60,61,61,62,62,63,63,64,64,65,65,66,66,67,67,68,68,69,69,70,70,71,71,72,72,73,73,74,74,75,75,76,76,77,77,77,78,78,78,79,79,79,80,80,80,81,81,81,82,82,82,83,83,83,84,84,84,85,85,86,86,87,87,88,88,89,89,90,90,91,91,92,92,93,93,94,94,95,95,96,96,97,97,98,98,99,99,100,100,101,101,102,102,103,103,104,104,105,105,106,106,107,107,108,108,109,109,110,110,111,111,112,112,113,113,114,114,115,115,116,116,117,117,117,118,118,118,119,119,119,120,120,120,121,121,121,122,122,122,123,123,123,124,124,125,125,126,126,127,127,128,128,129,129,130,130,131,131,132,132,133,133,134,134,135,135,136,136,137,137,138,138,139,139,140,140,141,141,142,142,143,143,144,144,145,145,146,146,147,147,148,148,149,149,150,150,151,151,152,152,153,153,154,154,155,155,155,156,156,156,157,157,157,158,158,158,159,159,159,160,160,160,161,161,161,162,162,163,163,164,164,165,165,166,166,167,167,168,168,169,169],"depth":[2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1],"label":["sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum"],"filenum":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"linenum":[7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,null,7,11,null,7,11,null,7,11,null,7,11,null,7,11,null,7,11,null,7,11,null,7,11,null,7,11,null,7,11,null,7,11,null,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,null,7,11,null,7,11,null,7,11,null,7,11,null,7,11,null,7,11,null,7,11,null,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,null,7,11,null,7,11,null,7,11,null,7,11,null,7,11,null,7,11,null,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,null,7,11,null,7,11,null,7,11,null,7,11,null,7,11,null,7,11,null,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11],"memalloc":[499.38786315918,499.38786315918,514.760841369629,514.760841369629,538.765014648438,538.765014648438,565.343154907227,565.343154907227,584.983123779297,584.983123779297,605.004783630371,605.004783630371,629.838691711426,629.838691711426,657.511421203613,657.511421203613,684.540061950684,684.540061950684,711.974014282227,711.974014282227,739.937858581543,739.937858581543,763.772033691406,763.772033691406,791.615562438965,791.615562438965,816.02220916748,816.02220916748,837.745933532715,837.745933532715,856.385131835938,856.385131835938,883.356842041016,883.356842041016,911.08381652832,911.08381652832,939.297393798828,939.297393798828,955.533676147461,955.533676147461,980.190185546875,980.190185546875,1009.5228729248,1009.5228729248,1035.78536987305,1035.78536987305,1064.09902191162,1064.09902191162,1094.17827606201,1094.17827606201,1122.31637573242,1122.31637573242,1150.3670501709,1150.3670501709,1180.77619934082,1180.77619934082,1201.38520812988,1201.38520812988,1224.42920684814,1224.42920684814,1252.40362548828,1252.40362548828,1275.46129608154,1275.46129608154,1207.00469207764,1207.00469207764,1207.00469207764,1105.54677581787,1105.54677581787,1105.54677581787,1052.00028991699,1052.00028991699,1052.00028991699,943.410346984863,943.410346984863,943.410346984863,863.634696960449,863.634696960449,863.634696960449,802.545639038086,802.545639038086,802.545639038086,747.899024963379,747.899024963379,747.899024963379,700.230987548828,700.230987548828,700.230987548828,652.582489013672,652.582489013672,652.582489013672,598.879211425781,598.879211425781,598.879211425781,529.004531860352,529.004531860352,529.004531860352,473.914726257324,473.914726257324,473.914726257324,490.315818786621,490.315818786621,532.90217590332,532.90217590332,553.375633239746,553.375633239746,587.31778717041,587.31778717041,624.797424316406,624.797424316406,647.668472290039,647.668472290039,665.245628356934,665.245628356934,690.965858459473,690.965858459473,716.886383056641,716.886383056641,735.453285217285,735.453285217285,751.607513427734,751.607513427734,776.196098327637,776.196098327637,804.74755859375,804.74755859375,830.593925476074,830.593925476074,856.460861206055,856.460861206055,873.501411437988,873.501411437988,890.6630859375,890.6630859375,914.561668395996,914.561668395996,936.602005004883,936.602005004883,964.740348815918,964.740348815918,992.191070556641,992.191070556641,1010.60333251953,1010.60333251953,1028.56578826904,1028.56578826904,1054.93226623535,1054.93226623535,1081.84538269043,1081.84538269043,1109.1651763916,1109.1651763916,1136.74608612061,1136.74608612061,1164.2857208252,1164.2857208252,1191.77570343018,1191.77570343018,1218.74597930908,1218.74597930908,1244.55560302734,1244.55560302734,1271.98645019531,1271.98645019531,1247.75430297852,1247.75430297852,1247.75430297852,1147.88037872314,1147.88037872314,1147.88037872314,1076.98412322998,1076.98412322998,1076.98412322998,982.307418823242,982.307418823242,982.307418823242,866.79517364502,866.79517364502,866.79517364502,751.125205993652,751.125205993652,751.125205993652,642.431243896484,642.431243896484,642.431243896484,526.250686645508,526.250686645508,526.250686645508,484.134437561035,484.134437561035,508.317306518555,508.317306518555,528.366737365723,528.366737365723,558.345916748047,558.345916748047,587.130088806152,587.130088806152,614.355247497559,614.355247497559,634.049613952637,634.049613952637,662.138031005859,662.138031005859,690.279769897461,690.279769897461,713.084609985352,713.084609985352,731.97102355957,731.97102355957,757.925880432129,757.925880432129,786.802558898926,786.802558898926,805.715103149414,805.715103149414,833.041923522949,833.041923522949,861.957550048828,861.957550048828,890.379112243652,890.379112243652,920.774238586426,920.774238586426,948.715667724609,948.715667724609,969.660552978516,969.660552978516,991.972549438477,991.972549438477,1019.48277282715,1019.48277282715,1049.36254882812,1049.36254882812,1077.42321014404,1077.42321014404,1105.29217529297,1105.29217529297,1122.54306793213,1122.54306793213,1152.00231933594,1152.00231933594,1174.12776947021,1174.12776947021,1195.03768920898,1195.03768920898,1223.06373596191,1223.06373596191,1252.78564453125,1252.78564453125,1280.19386291504,1280.19386291504,1222.59163665771,1222.59163665771,1222.59163665771,1106.55955505371,1106.55955505371,1106.55955505371,985.101600646973,985.101600646973,985.101600646973,877.419464111328,877.419464111328,877.419464111328,769.668510437012,769.668510437012,769.668510437012,648.017517089844,648.017517089844,648.017517089844,522.792175292969,522.792175292969,522.792175292969,485.813079833984,485.813079833984,510.930458068848,510.930458068848,539.877388000488,539.877388000488,570.757858276367,570.757858276367,597.688133239746,597.688133239746,624.563499450684,624.563499450684,653.970497131348,653.970497131348,682.342437744141,682.342437744141,712.68140411377,712.68140411377,741.978546142578,741.978546142578,770.621292114258,770.621292114258,797.573272705078,797.573272705078,816.847389221191,816.847389221191,845.884963989258,845.884963989258,872.584121704102,872.584121704102,890.662216186523,890.662216186523,915.065185546875,915.065185546875,944.402572631836,944.402572631836,973.467231750488,973.467231750488,999.91926574707,999.91926574707,1015.84772491455,1015.84772491455,1043.1314163208,1043.1314163208,1069.25253295898,1069.25253295898,1098.0737991333,1098.0737991333,1125.29936218262,1125.29936218262,1154.60401916504,1154.60401916504,1183.17331695557,1183.17331695557,1208.14169311523,1208.14169311523,1236.95585632324,1236.95585632324,1258.81830596924,1258.81830596924,1276.09593200684,1276.09593200684,1254.24172973633,1254.24172973633,1254.24172973633,1133.12605285645,1133.12605285645,1133.12605285645,1014.55848693848,1014.55848693848,1014.55848693848,895.180305480957,895.180305480957,895.180305480957,771.517234802246,771.517234802246,771.517234802246,642.38062286377,642.38062286377,642.38062286377,516.196685791016,516.196685791016,516.196685791016,498.950782775879,498.950782775879,527.759063720703,527.759063720703,558.26806640625,558.26806640625,584.853446960449,584.853446960449,601.80615234375,601.80615234375,626.974914550781,626.974914550781,648.134628295898,648.134628295898,670.960632324219,670.960632324219],"meminc":[0,0,15.3729782104492,0,24.0041732788086,0,26.5781402587891,0,19.6399688720703,0,20.0216598510742,0,24.8339080810547,0,27.6727294921875,0,27.0286407470703,0,27.433952331543,0,27.9638442993164,0,23.8341751098633,0,27.8435287475586,0,24.4066467285156,0,21.7237243652344,0,18.6391983032227,0,26.9717102050781,0,27.7269744873047,0,28.2135772705078,0,16.2362823486328,0,24.6565093994141,0,29.3326873779297,0,26.2624969482422,0,28.3136520385742,0,30.0792541503906,0,28.1380996704102,0,28.0506744384766,0,30.4091491699219,0,20.6090087890625,0,23.0439987182617,0,27.9744186401367,0,23.0576705932617,0,-68.4566040039062,0,0,-101.457916259766,0,0,-53.5464859008789,0,0,-108.589942932129,0,0,-79.7756500244141,0,0,-61.0890579223633,0,0,-54.646614074707,0,0,-47.6680374145508,0,0,-47.6484985351562,0,0,-53.7032775878906,0,0,-69.8746795654297,0,0,-55.0898056030273,0,0,16.4010925292969,0,42.5863571166992,0,20.4734573364258,0,33.9421539306641,0,37.4796371459961,0,22.8710479736328,0,17.5771560668945,0,25.7202301025391,0,25.920524597168,0,18.5669021606445,0,16.1542282104492,0,24.5885848999023,0,28.5514602661133,0,25.8463668823242,0,25.8669357299805,0,17.0405502319336,0,17.1616744995117,0,23.8985824584961,0,22.0403366088867,0,28.1383438110352,0,27.4507217407227,0,18.4122619628906,0,17.9624557495117,0,26.3664779663086,0,26.9131164550781,0,27.3197937011719,0,27.5809097290039,0,27.5396347045898,0,27.4899826049805,0,26.9702758789062,0,25.8096237182617,0,27.4308471679688,0,-24.2321472167969,0,0,-99.8739242553711,0,0,-70.8962554931641,0,0,-94.6767044067383,0,0,-115.512245178223,0,0,-115.669967651367,0,0,-108.693962097168,0,0,-116.180557250977,0,0,-42.1162490844727,0,24.1828689575195,0,20.049430847168,0,29.9791793823242,0,28.7841720581055,0,27.2251586914062,0,19.6943664550781,0,28.0884170532227,0,28.1417388916016,0,22.8048400878906,0,18.8864135742188,0,25.9548568725586,0,28.8766784667969,0,18.9125442504883,0,27.3268203735352,0,28.9156265258789,0,28.4215621948242,0,30.3951263427734,0,27.9414291381836,0,20.9448852539062,0,22.3119964599609,0,27.5102233886719,0,29.8797760009766,0,28.060661315918,0,27.8689651489258,0,17.2508926391602,0,29.4592514038086,0,22.1254501342773,0,20.9099197387695,0,28.0260467529297,0,29.7219085693359,0,27.4082183837891,0,-57.6022262573242,0,0,-116.032081604004,0,0,-121.457954406738,0,0,-107.682136535645,0,0,-107.750953674316,0,0,-121.650993347168,0,0,-125.225341796875,0,0,-36.9790954589844,0,25.1173782348633,0,28.9469299316406,0,30.8804702758789,0,26.9302749633789,0,26.8753662109375,0,29.4069976806641,0,28.371940612793,0,30.3389663696289,0,29.2971420288086,0,28.6427459716797,0,26.9519805908203,0,19.2741165161133,0,29.0375747680664,0,26.6991577148438,0,18.0780944824219,0,24.4029693603516,0,29.3373870849609,0,29.0646591186523,0,26.452033996582,0,15.9284591674805,0,27.28369140625,0,26.1211166381836,0,28.8212661743164,0,27.2255630493164,0,29.3046569824219,0,28.5692977905273,0,24.968376159668,0,28.8141632080078,0,21.8624496459961,0,17.2776260375977,0,-21.8542022705078,0,0,-121.115676879883,0,0,-118.567565917969,0,0,-119.37818145752,0,0,-123.663070678711,0,0,-129.136611938477,0,0,-126.183937072754,0,0,-17.2459030151367,0,28.8082809448242,0,30.5090026855469,0,26.5853805541992,0,16.9527053833008,0,25.1687622070312,0,21.1597137451172,0,22.8260040283203,0],"filename":["<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>"]},"interval":10,"files":[{"filename":"<expr>","content":"profvis({\n  csum <- function(x) {\n    if (length(x) < 2) return(x)\n\n    sum <- x[1]\n    for (i in seq(2, length(x))) {\n      sum[i] <- sum[i-1] + x[i]\n    }\n    sum\n  }\n  data$sum <- csum(data$value)\n})","normpath":"<expr>"}],"prof_output":"/var/folders/fz/v6wfsg2x1fb1rw4f6r0x4jwm0000gn/T//RtmpgyIRys/file10951f6038ce.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>Using this <code>csum</code> function, it takes just over half a second, which is about 4x as fast as before.</p>
<p>It may appear that no functions are called from line 7, but that’s not quite true: that line also calls <code>[</code>, <code>[&lt;-</code>, <code>-</code>, and <code>+</code>.</p>
<ul>
<li>The <code>[</code> and <code>[&lt;-</code> functions don’t appear in the flame graph. They are internal R functions which contain C code to handle indexing into atomic vectors, and are not dispatched to methods. (Contrast this with the first version of the code, where <code>$</code> was dispatched to <code>$.data.frame</code>).</li>
<li>The <code>-</code> and <code>+</code> functions can show up in a flame graph, but they are very fast so the sampling profiler may or may not happen to take a sample when they’re on the call stack.</li>
</ul>
<p>The code panel shows that there is still a large amount of memory being allocated in the <code>csum</code> function. In the flame graph. you probably have noticed the gray blocks labeled <code>&lt;GC&gt;</code>. These represent times where R is doing <em>garbage collection</em> – that is, when it is freeing (deallocating) chunks of memory that were allocated but no longer needed. If R is spending a lot of time freeing memory, that suggests that R is also spending a lot of time allocating memory. This is another common source of slowness in R code.</p>
<p>In the <code>csum</code> function, <code>sum</code> starts as a length-1 vector, and then grows, in a loop, to be the same length as <code>x</code>. Every time a vector grows, R allocates a new block of memory for the new, larger vector, and then copies the contents over. The memory allocated for the old vector is no longer needed, and will later be garbage collected.</p>
<p>To avoid all that memory allocation, copying, and garbage collection, we can pre-allocate a correctly-sized vector for <code>sum</code>. For this data, that will result in 29,999 fewer allocations, copies, and deallocations.</p>
<pre class="r"><code>profvis({
  csum2 &lt;- function(x) {
    if (length(x) &lt; 2) return(x)

    sum &lt;- numeric(length(x))  # Preallocate
    sum[1] &lt;- x[1]
    for (i in seq(2, length(x))) {
      sum[i] &lt;- sum[i-1] + x[i]
    }
    sum
  }
  data$sum &lt;- csum2(data$value)
})</code></pre>
<div id="htmlwidget-8313" style="width:100%;height:450px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-8313">{"x":{"message":{"prof":{"time":[1,1,2,2],"depth":[2,1,2,1],"label":["sum[i] <- sum[i-1] + x[i]","csum2","sum[i] <- sum[i-1] + x[i]","csum2"],"filenum":[1,1,1,1],"linenum":[8,12,8,12],"memalloc":[474.299850463867,474.299850463867,474.458557128906,474.458557128906],"meminc":[0,0,0.158706665039062,0],"filename":["<expr>","<expr>","<expr>","<expr>"]},"interval":10,"files":[{"filename":"<expr>","content":"profvis({\n  csum2 <- function(x) {\n    if (length(x) < 2) return(x)\n\n    sum <- numeric(length(x))  # Preallocate\n    sum[1] <- x[1]\n    for (i in seq(2, length(x))) {\n      sum[i] <- sum[i-1] + x[i]\n    }\n    sum\n  }\n  data$sum <- csum2(data$value)\n})","normpath":"<expr>"}],"prof_output":"/var/folders/fz/v6wfsg2x1fb1rw4f6r0x4jwm0000gn/T//RtmpgyIRys/file1095573e8780.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<p>This version of the code, with <code>csum2</code>, is around 60x faster than our original code, and requires almost no memory allocation. These performance improvements were possible by avoiding calls to <code>$</code> and <code>$&lt;-</code>, and by avoiding unnecessary memory allocation and copying from growing a vector in a loop.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
