<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Examples</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/htmlwidgets-0.6/htmlwidgets.js"></script>
<script src="site_libs/d3-3.5.6/d3.min.js"></script>
<link href="site_libs/profvis-0.2.8/profvis.css" rel="stylesheet" />
<script src="site_libs/profvis-0.2.8/profvis.js"></script>
<link href="site_libs/highlight-6.2.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlight-6.2.0/highlight.js"></script>
<script src="site_libs/profvis-binding-0.2.8/profvis.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<link rel="stylesheet"
      href="site_libs/highlight/textmate.css"
      type="text/css" />
<script src="site_libs/highlight/highlight.js"></script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>

<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Profvis</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Introduction</a>
</li>
<li>
  <a href="examples.html">Examples</a>
</li>
<li>
  <a href="faq.html">FAQ</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rstudio/profvis/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Examples</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#example-1">Example 1</a></li>
<li><a href="#example-2">Example 2</a></li>
</ul>
</div>

<p>Below are some examples of profvis in use. Keep in mind that R’s sampling profiler is non-deterministic, and that the code in these examples is run and profiled when this knitr document is executed, so the numeric timing values may not exactly match the text.</p>
<div id="example-1" class="section level3">
<h3>Example 1</h3>
<p>In this first example, we’ll work with a data frame that has 151 columns. One of the columns contains an ID, and the other 150 columns contain numeric values. What we will do is, for each numeric column, take the mean and subtract it from the column, so that the new mean value of the column is zero.</p>
<pre class="r"><code># Generate data
times &lt;- 4e5
cols &lt;- 150
data &lt;- as.data.frame(x = matrix(rnorm(times * cols, mean = 5), ncol = cols))
data &lt;- cbind(id = paste0(&quot;g&quot;, seq_len(times)), data)

profvis({
  data1 &lt;- data   # Store in another variable for this run

  # Get column means
  means &lt;- apply(data1[, names(data1) != &quot;id&quot;], 2, mean)

  # Subtract mean from each column
  for (i in seq_along(means)) {
    data1[, names(data1) != &quot;id&quot;][, i] &lt;- data1[, names(data1) != &quot;id&quot;][, i] - means[i]
  }
})</code></pre>
<div id="htmlwidget-5531" style="width:100%;height:420px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-5531">{"x":{"message":{"prof":{"time":[1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,8,8,8,8,9,9,9,9,10,10,10,10,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,22,22,22,22,23,23,23,23,24,24,24,24,25,25,25,25,26,26,26,26,27,27,27,28,28,28,29,29,29,30,30,30,31,31,31,32,32,32,33,33,33,34,34,34,35,35,35,36,36,36,37,37,37,38,38,38,39,39,39,40,40,40,41,41,41,42,42,42,43,43,43,44,44,44,45,45,45,46,46,46,47,47,47,48,48,48,49,49,49,50,50,50,51,51,51,52,52,52,53,53,53,54,54,54,55,55,55,56,56,56,57,57,57,58,58,58,59,59,59,60,60,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,76,77,78,79,79,79,80,81,82,82,83,83,83,84,85,85,85,86,87,88,88,88,89,89,89,90,90,90,91,92,93,93,93,94,95,95,96,97,98,99,100,101,101,101,102,103,103,103,104,105,105,105,106,107,108,108,109,109,110,110,111,111,112,112,113,113,114,114,114,115,116,116,116,117,118,119,120,121,122,123,124,125,126,127,128,128,128,129,129,129,129,130,130,130,130,131,131,131,131,131,131,132,132,132,132,133,133,133,134,134,134,134,135,136,137,137,138,139,139,140,140,140,140,141,141,141,141,142,142,143,143,143,143,143,144,144,144,145,145,145,146,146,146,147,148,148,148,148,149,149,149,149,149,149,150,150,150,151,152,152,152,152,152,153,154,154,154,154,155,155,155,156,156,156,157,157,157,157,158,158,158,158,158,159,159,159,160,160,160,160,160,160,161,162,162,162,163,163,163,164,164,165,165,165,166,166,166,167,167,167,167,167,168,168,168,168,168,169,169,169,169,170,170,171,171,171,171,171,172,173,173,173,174,175,175,175,175,176,177,178,178,178,179,179,179,180,180,180,181,181,181,182,182,182,183,183,183,184,185,185,185,186,186,186,186,187,187,187,187,187,188,188,189,190,190,190,191,191,191,191,191,191,191,192,192,192,192,192,193,193,193,194,195,196,197],"depth":[4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,2,1,1,1,3,2,1,1,1,2,1,3,2,1,1,3,2,1,1,1,3,2,1,3,2,1,3,2,1,1,1,3,2,1,1,2,1,1,1,1,1,1,3,2,1,1,3,2,1,1,3,2,1,1,1,2,1,2,1,2,1,2,1,2,1,2,1,3,2,1,1,3,2,1,1,1,1,1,1,1,1,1,1,1,1,3,2,1,4,3,2,1,4,3,2,1,6,5,4,3,2,1,4,3,2,1,3,2,1,4,3,2,1,1,1,2,1,1,2,1,4,3,2,1,4,3,2,1,2,1,5,4,3,2,1,3,2,1,3,2,1,3,2,1,1,4,3,2,1,6,5,4,3,2,1,3,2,1,1,5,4,3,2,1,1,4,3,2,1,3,2,1,3,2,1,4,3,2,1,5,4,3,2,1,3,2,1,6,5,4,3,2,1,1,3,2,1,3,2,1,2,1,3,2,1,3,2,1,5,4,3,2,1,5,4,3,2,1,4,3,2,1,2,1,5,4,3,2,1,1,3,2,1,1,4,3,2,1,1,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,1,3,2,1,4,3,2,1,5,4,3,2,1,2,1,1,3,2,1,7,6,5,4,3,2,1,5,4,3,2,1,3,2,1,1,1,1,1],"label":["unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","<GC>","aperm.default","aperm","apply","<GC>","aperm.default","aperm","apply","<GC>","aperm.default","aperm","apply","<GC>","aperm.default","aperm","apply","<GC>","aperm.default","aperm","apply","<GC>","aperm.default","aperm","apply","<GC>","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","mean.default","FUN","apply","apply","apply","mean.default","FUN","apply","apply","apply","<GC>","apply","mean.default","FUN","apply","apply","mean.default","FUN","apply","apply","apply","mean.default","FUN","apply","mean.default","FUN","apply","mean.default","FUN","apply","apply","apply","mean.default","FUN","apply","apply","<GC>","apply","apply","apply","apply","apply","apply","mean.default","FUN","apply","apply","mean.default","FUN","apply","apply","mean.default","FUN","apply","apply","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","mean.default","FUN","apply","apply","mean.default","FUN","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","mean.default","FUN","apply","FUN","vapply","[<-.data.frame","[<-","vapply","order","[<-.data.frame","[<-","match.fun","lapply","unlist","order","[<-.data.frame","[<-","unlist","order","[<-.data.frame","[<-","order","[<-.data.frame","[<-","rep_len","order","[<-.data.frame","[<-","-","-","[<-.data.frame","[<-","-","[<-.data.frame","[<-","all","order","[<-.data.frame","[<-","rep_len","order","[<-.data.frame","[<-","[<-.data.frame","[<-","lapply","unlist","order","[<-.data.frame","[<-","order","[<-.data.frame","[<-","order","[<-.data.frame","[<-","order","[<-.data.frame","[<-","-","any","order","[<-.data.frame","[<-","<GC>","lapply","unlist","order","[<-.data.frame","[<-","order","[<-.data.frame","[<-","-","lapply","unlist","order","[<-.data.frame","[<-","-","unlist","order","[<-.data.frame","[<-","vapply","[<-.data.frame","[<-","order","[<-.data.frame","[<-","rep_len","order","[<-.data.frame","[<-","<GC>","unlist","order","[<-.data.frame","[<-","order","[<-.data.frame","[<-","match.fun","lapply","unlist","order","[<-.data.frame","[<-","-","vapply","[<-.data.frame","[<-","order","[<-.data.frame","[<-","[<-.data.frame","[<-","order","[<-.data.frame","[<-","vapply","[<-.data.frame","[<-","<GC>","vapply","order","[<-.data.frame","[<-","<GC>","vapply","order","[<-.data.frame","[<-","rep_len","order","[<-.data.frame","[<-","[<-.data.frame","[<-","match.fun","vapply","order","[<-.data.frame","[<-","-","order","[<-.data.frame","[<-","-","vapply","order","[<-.data.frame","[<-","-","-","<GC>","[<-.data.frame","[<-","<GC>","[<-.data.frame","[<-","<GC>","[<-.data.frame","[<-","<GC>","[<-.data.frame","[<-","<GC>","[<-.data.frame","[<-","<GC>","[<-.data.frame","[<-","-","order","[<-.data.frame","[<-","unlist","order","[<-.data.frame","[<-","lapply","unlist","order","[<-.data.frame","[<-","[<-.data.frame","[<-","-","NROW","[<-.data.frame","[<-","is.function","match.fun","lapply","unlist","order","[<-.data.frame","[<-","lapply","unlist","order","[<-.data.frame","[<-","order","[<-.data.frame","[<-","-","-","-","-"],"filenum":[null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,1,1,1,null,null,1,1,1,null,1,null,null,1,1,null,null,1,1,1,null,null,1,null,null,1,null,null,1,1,1,null,null,1,1,null,1,1,1,1,1,1,null,null,1,1,null,null,1,1,null,null,1,1,1,null,1,null,1,null,1,null,1,null,1,null,1,null,null,1,1,null,null,1,1,1,1,1,1,1,1,1,1,1,1,null,null,1,null,null,1,1,null,null,1,1,null,null,null,null,1,1,null,null,1,1,null,1,1,null,null,1,1,1,1,1,1,1,1,1,null,null,1,1,null,null,1,1,1,1,null,null,null,1,1,null,1,1,null,1,1,null,1,1,1,null,null,1,1,null,null,null,null,1,1,null,1,1,1,null,null,null,1,1,1,null,null,1,1,null,1,1,null,1,1,null,null,1,1,null,null,null,1,1,null,1,1,null,null,null,null,1,1,1,null,1,1,null,1,1,1,1,null,1,1,null,1,1,null,null,null,1,1,null,null,null,1,1,null,null,1,1,1,1,null,null,null,1,1,1,null,1,1,1,null,null,1,1,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,1,null,1,1,null,null,1,1,null,null,null,1,1,1,1,1,null,1,1,null,null,null,null,null,1,1,null,null,null,1,1,null,1,1,1,1,1,1],"linenum":[null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,null,null,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,null,null,11,11,11,null,null,11,11,11,null,11,null,null,11,11,null,null,11,11,11,null,null,11,null,null,11,null,null,11,11,11,null,null,11,11,null,11,11,11,11,11,11,null,null,11,11,null,null,11,11,null,null,11,11,11,null,11,null,11,null,11,null,11,null,11,null,11,null,null,11,11,null,null,11,11,11,11,11,11,11,11,11,11,11,11,null,null,11,null,null,15,15,null,null,15,15,null,null,null,null,15,15,null,null,15,15,null,15,15,null,null,15,15,15,15,15,15,15,15,15,null,null,15,15,null,null,15,15,15,15,null,null,null,15,15,null,15,15,null,15,15,null,15,15,15,null,null,15,15,null,null,null,null,15,15,null,15,15,15,null,null,null,15,15,15,null,null,15,15,null,15,15,null,15,15,null,null,15,15,null,null,null,15,15,null,15,15,null,null,null,null,15,15,15,null,15,15,null,15,15,15,15,null,15,15,null,15,15,null,null,null,15,15,null,null,null,15,15,null,null,15,15,15,15,null,null,null,15,15,15,null,15,15,15,null,null,15,15,15,15,null,15,15,null,15,15,null,15,15,null,15,15,null,15,15,null,15,15,15,null,15,15,null,null,15,15,null,null,null,15,15,15,15,15,null,15,15,null,null,null,null,null,15,15,null,null,null,15,15,null,15,15,15,15,15,15],"memalloc":[931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.050598144531,931.052116394043,931.052116394043,931.052116394043,931.052116394043,930.987075805664,930.987075805664,930.987075805664,930.987075805664,930.987075805664,930.987075805664,930.987075805664,930.987075805664,930.987075805664,930.987075805664,930.987075805664,930.987075805664,930.987075805664,930.987075805664,930.987075805664,930.987075805664,930.987075805664,930.987075805664,930.987075805664,930.987075805664,930.987037658691,930.987037658691,930.987037658691,930.987037658691,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1388.75070953369,1413.1842880249,1431.49500274658,1449.80574035645,1457.43521881104,1472.69417572021,1481.84959411621,1500.16030883789,1510.84156799316,1530.67822265625,1538.30770111084,1553.5666809082,1565.7738571167,1584.08457183838,1594.76583099365,1606.97300720215,1617.65432739258,1617.65432739258,1617.65432739258,1632.9132232666,1637.49092102051,1648.17224121094,1648.17224121094,1648.17224121094,1655.80165863037,1668.00883483887,1668.00885772705,1668.00885772705,1419.27336120605,1419.27336120605,1419.27336120605,1439.10995483398,1465.05023193359,1465.05023193359,1465.05023193359,1484.88682556152,1507.77526092529,1526.08605957031,1526.08605957031,1526.08605957031,1548.97449493408,1548.97449493408,1548.97449493408,1564.23345184326,1564.23345184326,1564.23345184326,1588.64776611328,1606.95848083496,1632.89875793457,1632.89875793457,1632.89875793457,1652.7353515625,1667.99433135986,1667.99433135986,1408.59231567383,1431.4807510376,1449.79148864746,1477.25762176514,1492.51657867432,1518.45685577393,1518.45685577393,1518.45685577393,1538.29344940186,1564.23372650146,1564.23372650146,1564.23372650146,1584.07032012939,1610.010597229,1610.010597229,1610.010597229,1629.84719085693,1652.7356262207,1667.99460601807,1667.99460601807,1667.99460601807,1667.99460601807,1667.99460601807,1667.99460601807,1667.99460601807,1667.99460601807,1667.99460601807,1667.99460601807,1393.33354949951,1393.33354949951,1411.64432525635,1411.64432525635,1411.64432525635,1439.11039733887,1457.42119598389,1457.42119598389,1457.42119598389,1484.88726806641,1500.14622497559,1530.66413879395,1545.92309570312,1576.44100952148,1591.69996643066,1622.21788024902,1637.4768371582,1667.99475097656,1678.67607116699,1698.51266479492,1709.19398498535,1709.19398498535,1709.19398498535,1719.5622253418,1719.5622253418,1719.5622253418,1719.5622253418,1723.53379821777,1723.53379821777,1723.53379821777,1723.53379821777,1734.19407653809,1734.19407653809,1734.19407653809,1734.19407653809,1734.19407653809,1734.19407653809,1741.10908508301,1741.10908508301,1741.10908508301,1741.10908508301,1751.61568450928,1751.61568450928,1751.61568450928,1758.63310241699,1758.63310241699,1758.63310241699,1758.63310241699,1765.6424407959,1766.13706970215,1772.99101257324,1772.99101257324,1779.8279876709,1786.94896697998,1786.94896697998,1790.77352905273,1790.77352905273,1790.77352905273,1790.77352905273,1466.79401397705,1466.79401397705,1466.79401397705,1466.79401397705,1474.20738983154,1474.20738983154,1488.08435821533,1488.08435821533,1488.08435821533,1488.08435821533,1488.08435821533,1495.46648406982,1495.46648406982,1495.46648406982,1509.33014678955,1509.33014678955,1509.33014678955,1516.7387008667,1516.7387008667,1516.7387008667,1530.53649902344,1537.69159698486,1537.69159698486,1537.69159698486,1537.69159698486,1545.12184906006,1545.12184906006,1545.12184906006,1545.12184906006,1545.12184906006,1545.12184906006,1537.05150604248,1537.05150604248,1537.05150604248,1551.11141204834,1558.39005279541,1558.39005279541,1558.39005279541,1558.39005279541,1558.39005279541,1572.38973236084,1579.67436981201,1579.67436981201,1579.67436981201,1579.67436981201,1593.68991851807,1593.68991851807,1593.68991851807,1601.03703308105,1601.03703308105,1601.03703308105,1611.71849060059,1611.71849060059,1611.71849060059,1611.71849060059,1615.32206726074,1615.32206726074,1615.32206726074,1615.32206726074,1615.32206726074,1610.81074523926,1610.81074523926,1610.81074523926,1617.94807434082,1617.94807434082,1617.94807434082,1617.94807434082,1617.94807434082,1617.94807434082,1631.97792053223,1639.0930480957,1639.0930480957,1639.0930480957,1650.10668945312,1650.10668945312,1650.10668945312,1660.3752746582,1660.3752746582,1671.43928527832,1671.43928527832,1671.43928527832,1681.65017700195,1681.65017700195,1681.65017700195,1685.52229309082,1685.52229309082,1685.52229309082,1685.52229309082,1685.52229309082,1669.56970214844,1669.56970214844,1669.56970214844,1669.56970214844,1669.56970214844,1680.27221679688,1680.27221679688,1680.27221679688,1680.27221679688,1690.52436828613,1690.52436828613,1701.47509002686,1701.47509002686,1701.47509002686,1701.47509002686,1701.47509002686,1711.77777099609,1722.56052398682,1722.56052398682,1722.56052398682,1729.50970458984,1736.69185638428,1736.69185638428,1736.69185638428,1736.69185638428,1743.69525146484,1750.78802490234,1751.11542510986,1751.11542510986,1751.11542510986,1751.11542510986,1751.11542510986,1751.11542510986,1751.11542510986,1751.11542510986,1751.11542510986,1751.11542510986,1751.11542510986,1751.11542510986,1751.11542510986,1751.11542510986,1751.11542510986,824.228019714355,824.228019714355,824.228019714355,830.993392944336,841.68342590332,841.68342590332,841.68342590332,849.010612487793,849.010612487793,849.010612487793,849.010612487793,859.595558166504,859.595558166504,859.595558166504,859.595558166504,859.595558166504,866.87809753418,866.87809753418,880.642807006836,887.746704101562,887.746704101562,887.746704101562,898.458122253418,898.458122253418,898.458122253418,898.458122253418,898.458122253418,898.458122253418,898.458122253418,905.620216369629,905.620216369629,905.620216369629,905.620216369629,905.620216369629,894.433540344238,894.433540344238,894.433540344238,904.750602722168,915.389762878418,922.482536315918,933.121696472168],"meminc":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.00151824951171875,0,0,0,-0.0650405883789062,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-3.814697265625e-05,0,0,0,457.763671875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24.4335784912109,18.3107147216797,18.3107376098633,7.62947845458984,15.2589569091797,9.15541839599609,18.3107147216797,10.6812591552734,19.8366546630859,7.62947845458984,15.2589797973633,12.2071762084961,18.3107147216797,10.6812591552734,12.2071762084961,10.6813201904297,0,0,15.2588958740234,4.57769775390625,10.6813201904297,0,0,7.62941741943359,12.2071762084961,2.288818359375e-05,0,-248.735496520996,0,0,19.8365936279297,25.9402770996094,0,0,19.8365936279297,22.8884353637695,18.3107986450195,0,0,22.8884353637695,0,0,15.2589569091797,0,0,24.4143142700195,18.3107147216797,25.9402770996094,0,0,19.8365936279297,15.2589797973633,0,-259.402015686035,22.8884353637695,18.3107376098633,27.4661331176758,15.2589569091797,25.9402770996094,0,0,19.8365936279297,25.9402770996094,0,0,19.8365936279297,25.9402770996094,0,0,19.8365936279297,22.8884353637695,15.2589797973633,0,0,0,0,0,0,0,0,0,-274.661056518555,0,18.3107757568359,0,0,27.4660720825195,18.3107986450195,0,0,27.4660720825195,15.2589569091797,30.5179138183594,15.2589569091797,30.5179138183594,15.2589569091797,30.5179138183594,15.2589569091797,30.5179138183594,10.6813201904297,19.8365936279297,10.6813201904297,0,0,10.3682403564453,0,0,0,3.97157287597656,0,0,0,10.6602783203125,0,0,0,0,0,6.91500854492188,0,0,0,10.5065994262695,0,0,7.01741790771484,0,0,0,7.00933837890625,0.49462890625,6.85394287109375,0,6.83697509765625,7.12097930908203,0,3.82456207275391,0,0,0,-323.979515075684,0,0,0,7.41337585449219,0,13.8769683837891,0,0,0,0,7.38212585449219,0,0,13.8636627197266,0,0,7.40855407714844,0,0,13.7977981567383,7.15509796142578,0,0,0,7.43025207519531,0,0,0,0,0,-8.07034301757812,0,0,14.0599060058594,7.27864074707031,0,0,0,0,13.9996795654297,7.28463745117188,0,0,0,14.0155487060547,0,0,7.34711456298828,0,0,10.6814575195312,0,0,0,3.60357666015625,0,0,0,0,-4.51132202148438,0,0,7.1373291015625,0,0,0,0,0,14.0298461914062,7.11512756347656,0,0,11.0136413574219,0,0,10.2685852050781,0,11.0640106201172,0,0,10.2108917236328,0,0,3.87211608886719,0,0,0,0,-15.9525909423828,0,0,0,0,10.7025146484375,0,0,0,10.2521514892578,0,10.9507217407227,0,0,0,0,10.3026809692383,10.7827529907227,0,0,6.94918060302734,7.18215179443359,0,0,0,7.00339508056641,7.0927734375,0.327400207519531,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-926.887405395508,0,0,6.76537322998047,10.6900329589844,0,0,7.32718658447266,0,0,0,10.5849456787109,0,0,0,0,7.28253936767578,0,13.7647094726562,7.10389709472656,0,0,10.7114181518555,0,0,0,0,0,0,7.16209411621094,0,0,0,0,-11.1866760253906,0,0,10.3170623779297,10.63916015625,7.0927734375,10.63916015625],"filename":[null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>","<expr>",null,null,"<expr>","<expr>","<expr>",null,"<expr>",null,null,"<expr>","<expr>",null,null,"<expr>","<expr>","<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>","<expr>","<expr>",null,null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>",null,null,"<expr>","<expr>",null,null,"<expr>","<expr>","<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,null,"<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>",null,null,"<expr>","<expr>",null,null,"<expr>","<expr>",null,null,null,null,"<expr>","<expr>",null,null,"<expr>","<expr>",null,"<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>",null,null,"<expr>","<expr>",null,null,null,null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>",null,null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,null,"<expr>","<expr>",null,null,null,"<expr>","<expr>",null,"<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,null,null,"<expr>","<expr>",null,null,null,"<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,null,"<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,null,null,null,null,"<expr>","<expr>",null,null,null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>"]},"interval":10,"files":[{"filename":"<expr>","content":"# Generate data\ntimes <- 4e5\ncols <- 150\ndata <- as.data.frame(x = matrix(rnorm(times * cols, mean = 5), ncol = cols))\ndata <- cbind(id = paste0(\"g\", seq_len(times)), data)\n\nprofvis({\n  data1 <- data   # Store in another variable for this run\n\n  # Get column means\n  means <- apply(data1[, names(data1) != \"id\"], 2, mean)\n\n  # Subtract mean from each column\n  for (i in seq_along(means)) {\n    data1[, names(data1) != \"id\"][, i] <- data1[, names(data1) != \"id\"][, i] - means[i]\n  }\n})","normpath":"<expr>"}],"prof_output":"/tmp/Rtmpr7ph7T/file1f7729505922.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"v"}},"evals":[],"jsHooks":[]}</script>
<p>Most of the time is spent in the <code>apply</code> call, so that’s the best candidate for a first pass at optimization. We can also see that the <code>apply</code> results in a lot of memory being allocated and deallocated. Memory “churning” is often a cause for performance problems.</p>
<p>Looking at the flame graph, we can see that <code>apply</code> calls <code>as.matrix</code> and <code>aperm</code>. These two functions convert the data frame to a matrix and transpose it – so even before we’ve done any useful computations, we’ve spent a large amount of time transforming the data.</p>
<p>We could try to speed this up in a number of ways. One possibility is that we could simply leave the data in matrix form (instead of putting it in a data frame in line 4). That would remove the need for the <code>as.matrix</code> call, but it would still require <code>aperm</code> to transpose the data. It would also lose the connection of each row to the <code>id</code> column, which is undesirable. In any case, using <code>apply</code> over columns looks like it will be expensive because of the call to <code>aperm</code>.</p>
<p>An obvious alternative is to use the <code>colMeans</code> function. But there’s also another possibility. Data frames are implemented as lists of vectors, where each column is one vector, so we could use <code>lapply</code> or <code>vapply</code> to apply the <code>mean</code> function over each column. Let’s compare the speed of these four different ways of getting column means.</p>
<pre class="r"><code>profvis({
  data1 &lt;- data
  # Four different ways of getting column means
  means &lt;- apply(data1[, names(data1) != &quot;id&quot;], 2, mean)
  means &lt;- colMeans(data1[, names(data1) != &quot;id&quot;])
  means &lt;- lapply(data1[, names(data1) != &quot;id&quot;], mean)
  means &lt;- vapply(data1[, names(data1) != &quot;id&quot;], mean, numeric(1))
})</code></pre>
<div id="htmlwidget-9824" style="width:100%;height:300px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-9824">{"x":{"message":{"prof":{"time":[1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,8,8,8,8,9,9,9,9,10,10,10,10,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,22,22,22,23,23,23,24,24,24,25,25,25,26,26,26,27,27,27,28,28,28,29,29,29,30,30,30,31,31,31,32,32,32,33,33,33,34,34,34,35,35,35,36,36,36,37,37,37,38,38,38,39,39,39,40,40,40,41,41,41,42,42,42,43,43,43,44,44,44,45,45,45,46,47,48,49,50,50,50,51,52,53,54,54,54,55,56,57,58,59,59,60,61,61,61,62,63,64,65,65,65,66,67,68,69,70,71,71,72,72,73,73,73,74,75,76,77,78,78,78,79,80,81,82,83,84,85,85,86,86,87,87,88,88,89,89,90,90,90,91,92,92,92,93,94,95,96,97,97,97,98,99,100,101,101,101,102,103,104,104,104,105,106,107,107,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,125,125,126,127,128,129,129,130,131,132,133,133,133,133,134,134,134,134,135,135,135,135,136,136,136,136,137,137,137,137,138,138,138,138,139,139,139,139,140,140,140,140,141,141,141,141,142,142,142,142,143,143,143,143,144,144,144,144,145,145,145,145,146,146,146,146,147,147,147,147,148,148,148,148,149,149,149,149,150,150,150,150,151,151,151,151,152,152,152,152,153,153,153,153,154,154,154,154,155,155,155,155,156,156,156,156,157,157,157,157,158,158,158,158,159,159,159,159,160,160,160,160,161,161,161,161,162,162,162,162,163,163,163,163,164,164,164,164,165,165,165,165,166,166,166,166,167,167,167,167,168,168,168,168,169,169,169,169,170,170,170,170,171,171,171,171,172,172,172,172,173,173,173,173,174,174,174,174,175,175,175,175,176,176,176,176,177,177,177,177,178,178,178,178,179,179,179,179,180,180,180,180,181,181,181,181,182,182,182,182,183,183,183,183,184,184,184,184,185,185,185,185,186,186,186,186,187,187,187,187,188,188,188,188,189,189,189,189,190,190,190,190,191,191,191,191,192,192,192,192,193,193,193,193,194,194,194,194,195,195,195,195,196,196,196,196,197,197,197,197,198,198,198,198,199,199,199,199,200,201,202,203,204,205,206,207,208,208,208,209,209,209,210,210,210,211,211,211,212,212,212,213,213,213,214,214,214,215,215,215,216,216,216,217,217,217,218,218,218,219,219,219,220,220,220,221,221,221,222,222,222,223,223,223,224,224,224,225,225,225,226,226,226,227,227,227,228,228,228,229,229,229,230,230,230,231,231,231,232,232,232,233,233,233,234,234,234,235,235,235,236,236,236],"depth":[4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,1,1,1,1,3,2,1,1,1,1,3,2,1,1,1,1,1,2,1,1,3,2,1,1,1,1,3,2,1,1,1,1,1,1,2,1,2,1,3,2,1,1,1,1,1,3,2,1,1,1,1,1,1,1,2,1,2,1,2,1,2,1,2,1,3,2,1,1,3,2,1,1,1,1,1,3,2,1,1,1,1,3,2,1,1,1,3,2,1,1,1,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,2,1,1,1,1,2,1,1,1,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,1,1,1,1,1,1,1,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1],"label":["unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","unlist","as.matrix.data.frame","as.matrix","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","aperm.default","aperm","apply","apply","apply","apply","apply","mean.default","FUN","apply","apply","apply","apply","mean.default","FUN","apply","apply","apply","apply","apply","<GC>","apply","apply","mean.default","FUN","apply","apply","apply","apply","mean.default","FUN","apply","apply","apply","apply","apply","apply","<GC>","apply","<GC>","apply","mean.default","FUN","apply","apply","apply","apply","apply","mean.default","FUN","apply","apply","apply","apply","apply","apply","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","<GC>","apply","mean.default","FUN","apply","apply","mean.default","FUN","apply","apply","apply","apply","apply","mean.default","FUN","apply","apply","apply","apply","mean.default","FUN","apply","apply","apply","mean.default","FUN","apply","apply","apply","mean.default","FUN","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","apply","mean.default","FUN","apply","apply","apply","apply","<GC>","apply","apply","apply","apply","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","unlist","as.matrix.data.frame","as.matrix","colMeans","colMeans","colMeans","colMeans","colMeans","colMeans","colMeans","colMeans","colMeans","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","lapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply"],"filenum":[null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,1,1,1,1,null,null,1,1,1,1,null,null,1,1,1,1,1,null,1,1,null,null,1,1,1,1,null,null,1,1,1,1,1,1,null,1,null,1,null,null,1,1,1,1,1,null,null,1,1,1,1,1,1,1,null,1,null,1,null,1,null,1,null,1,null,null,1,1,null,null,1,1,1,1,1,null,null,1,1,1,1,null,null,1,1,1,null,null,1,1,1,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,1,1,1,1,null,1,1,1,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,1,1,1,1,1,1,1,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1],"linenum":[null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,null,null,4,4,4,4,4,null,null,4,4,4,4,null,null,4,4,4,4,4,null,4,4,null,null,4,4,4,4,null,null,4,4,4,4,4,4,null,4,null,4,null,null,4,4,4,4,4,null,null,4,4,4,4,4,4,4,null,4,null,4,null,4,null,4,null,4,null,null,4,4,null,null,4,4,4,4,4,null,null,4,4,4,4,null,null,4,4,4,null,null,4,4,4,null,null,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,null,null,4,4,4,4,null,4,4,4,4,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,null,null,null,5,5,5,5,5,5,5,5,5,null,null,6,null,null,6,null,null,6,null,null,6,null,null,6,null,null,6,null,null,6,null,null,6,null,null,6,null,null,6,null,null,6,null,null,6,null,null,6,null,null,6,null,null,7,null,null,7,null,null,7,null,null,7,null,null,7,null,null,7,null,null,7,null,null,7,null,null,7,null,null,7,null,null,7,null,null,7,null,null,7,null,null,7,null,null,7],"memalloc":[1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1388.90858459473,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1846.67374420166,1858.8821105957,1874.14106750488,1884.82232666016,1900.08128356934,1907.71082305908,1907.71082305908,1907.71082305908,1927.54741668701,1938.22867584229,1947.38409423828,1953.48769378662,1953.48769378662,1953.48769378662,1965.69480895996,1973.32428741455,1988.58324432373,1996.21272277832,1848.19486236572,1848.19486236572,1854.28517150879,1869.54418945312,1869.54418945312,1869.54418945312,1881.75130462646,1897.01026153564,1907.69152069092,1922.95053863525,1922.95053863525,1922.95053863525,1935.15765380859,1950.41661071777,1961.09786987305,1977.88276672363,1988.56400299072,2000.7712020874,2000.7712020874,1848.1833114624,1848.1833114624,1854.28515625,1854.28515625,1854.28515625,1866.49227142334,1881.75122833252,1889.38070678711,1904.63966369629,1915.32098388672,1915.32098388672,1915.32098388672,1935.15757751465,1945.83883666992,1961.0977935791,1973.3049697876,1988.56392669678,1999.24518585205,2000.77112579346,2000.77112579346,2000.77112579346,2000.77112579346,2000.77112579346,2000.77112579346,2000.77112579346,2000.77112579346,1390.41841125488,1390.41841125488,1396.52044677734,1396.52044677734,1396.52044677734,1416.35704040527,1434.66783905029,1434.66783905029,1434.66783905029,1446.87495422363,1465.1856918335,1477.39286804199,1500.28130340576,1510.96262359619,1510.96262359619,1510.96262359619,1533.8509979248,1546.0581741333,1568.94660949707,1579.6279296875,1579.6279296875,1579.6279296875,1599.46452331543,1614.72348022461,1633.03427886963,1633.03427886963,1633.03427886963,1645.24139404297,1668.12982940674,1678.81114959717,1678.81114959717,1678.81114959717,1698.6477432251,1713.90670013428,1732.21743774414,1744.42461395264,1762.7353515625,1774.942527771,1797.83096313477,1810.03816223145,1831.40065765381,1843.6078338623,1863.44451141357,1877.17752838135,1893.96242523193,1904.64366149902,1919.9026184082,1927.53209686279,1945.84283447266,1953.4723739624,1953.4723739624,1953.4723739624,1970.25720977783,1980.93844604492,1999.24918365479,2000.77512359619,2000.77512359619,1420.93528747559,1436.19424438477,1459.08267974854,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.5687713623,1927.57122039795,1927.57122039795,1927.57122039795,1927.57122039795,1927.57122039795,1927.57122039795,1927.57122039795,1927.57122039795,1927.58139801025,1927.58139801025,1927.58139801025,1927.58187866211,1927.58187866211,1927.58187866211,1927.58251953125,1927.58251953125,1927.58251953125,1927.58294677734,1927.58294677734,1927.58294677734,1927.58353424072,1927.58353424072,1927.58353424072,1927.58396148682,1927.58396148682,1927.58396148682,1927.58460235596,1927.58460235596,1927.58460235596,1927.58508300781,1927.58508300781,1927.58508300781,1927.58572387695,1927.58572387695,1927.58572387695,1927.58615112305,1927.58615112305,1927.58615112305,1927.58684539795,1927.58684539795,1927.58684539795,1927.58727264404,1927.58727264404,1927.58727264404,1927.58791351318,1927.58791351318,1927.58791351318,1927.58834075928,1927.58834075928,1927.58834075928,1927.59857177734,1927.59857177734,1927.59857177734,1927.59899902344,1927.59899902344,1927.59899902344,1927.59963989258,1927.59963989258,1927.59963989258,1927.60006713867,1927.60006713867,1927.60006713867,1927.60076141357,1927.60076141357,1927.60076141357,1927.60118865967,1927.60118865967,1927.60118865967,1927.60182952881,1927.60182952881,1927.60182952881,1927.60231018066,1927.60231018066,1927.60231018066,1927.6029510498,1927.6029510498,1927.6029510498,1927.6033782959,1927.6033782959,1927.6033782959,1927.60396575928,1927.60396575928,1927.60396575928,1927.60444641113,1927.60444641113,1927.60444641113,1927.60508728027,1927.60508728027,1927.60508728027,1927.60551452637,1927.60551452637,1927.60551452637,1927.60620880127,1927.60620880127,1927.60620880127],"meminc":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,457.765159606934,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12.208366394043,15.2589569091797,10.6812591552734,15.2589569091797,7.62953948974609,0,0,19.8365936279297,10.6812591552734,9.15541839599609,6.10359954833984,0,0,12.2071151733398,7.62947845458984,15.2589569091797,7.62947845458984,-148.017860412598,0,6.09030914306641,15.2590179443359,0,0,12.2071151733398,15.2589569091797,10.6812591552734,15.2590179443359,0,0,12.2071151733398,15.2589569091797,10.6812591552734,16.7848968505859,10.6812362670898,12.2071990966797,0,-152.587890625,0,6.10184478759766,0,0,12.2071151733398,15.2589569091797,7.62947845458984,15.2589569091797,10.6813201904297,0,0,19.8365936279297,10.6812591552734,15.2589569091797,12.2071762084961,15.2589569091797,10.6812591552734,1.52593994140625,0,0,0,0,0,0,0,-610.352714538574,0,6.10203552246094,0,0,19.8365936279297,18.3107986450195,0,0,12.2071151733398,18.3107376098633,12.2071762084961,22.8884353637695,10.6813201904297,0,0,22.8883743286133,12.2071762084961,22.8884353637695,10.6813201904297,0,0,19.8365936279297,15.2589569091797,18.3107986450195,0,0,12.2071151733398,22.8884353637695,10.6813201904297,0,0,19.8365936279297,15.2589569091797,18.3107376098633,12.2071762084961,18.3107376098633,12.2071762084961,22.8884353637695,12.2071990966797,21.3624954223633,12.2071762084961,19.8366775512695,13.7330169677734,16.7848968505859,10.6812362670898,15.2589569091797,7.62947845458984,18.3107376098633,7.62953948974609,0,0,16.7848358154297,10.6812362670898,18.3107376098633,1.52593994140625,0,-579.839836120605,15.2589569091797,22.8884353637695,468.48609161377,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.00244903564453125,0,0,0,0,0,0,0,0.0101776123046875,0,0,0.00048065185546875,0,0,0.000640869140625,0,0,0.00042724609375,0,0,0.00058746337890625,0,0,0.00042724609375,0,0,0.000640869140625,0,0,0.00048065185546875,0,0,0.000640869140625,0,0,0.00042724609375,0,0,0.00069427490234375,0,0,0.00042724609375,0,0,0.000640869140625,0,0,0.00042724609375,0,0,0.0102310180664062,0,0,0.00042724609375,0,0,0.000640869140625,0,0,0.00042724609375,0,0,0.00069427490234375,0,0,0.00042724609375,0,0,0.000640869140625,0,0,0.00048065185546875,0,0,0.000640869140625,0,0,0.00042724609375,0,0,0.00058746337890625,0,0,0.00048065185546875,0,0,0.000640869140625,0,0,0.00042724609375,0,0,0.00069427490234375,0,0],"filename":[null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>",null,"<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,null,"<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>","<expr>",null,null,"<expr>","<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>",null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>"]},"interval":10,"files":[{"filename":"<expr>","content":"profvis({\n  data1 <- data\n  # Four different ways of getting column means\n  means <- apply(data1[, names(data1) != \"id\"], 2, mean)\n  means <- colMeans(data1[, names(data1) != \"id\"])\n  means <- lapply(data1[, names(data1) != \"id\"], mean)\n  means <- vapply(data1[, names(data1) != \"id\"], mean, numeric(1))\n})","normpath":"<expr>"}],"prof_output":"/tmp/Rtmpr7ph7T/file1f771ff9a72a.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"v"}},"evals":[],"jsHooks":[]}</script>
<p><code>colMeans</code> is about 6x faster than using <code>apply</code> with <code>mean</code>, but it looks like it’s still using <code>as.matrix</code>, which takes a significant amount of time. <code>lapply</code>/<code>vapply</code>are faster yet – about 10x faster than <code>apply</code>. <code>lapply</code> returns the values in a list, while <code>vapply</code> returns the values in a numeric vector, which is the form that we want, so it looks like <code>vapply</code> is the way to go for this part.</p>
<p>(If you want finer-grained comparisons of code performance, you can use the <a href="https://cran.r-project.org/web/packages/microbenchmark/index.html">microbenchmark</a> package. There’s more information about microbenchmark in the <a href="http://adv-r.had.co.nz/Profiling.html#code-organisation">profiling</a> chapter of Hadley Wickham’s book, <em>Advanced R</em>.)</p>
<p>You can also see that the faster methods also result in less memory allocation and deallocation. This is not a coincidence – allocating and deallocating memory can be expensive.</p>
<p>Let’s take the original code and replace <code>apply</code> with <code>vapply</code>:</p>
<pre class="r"><code>profvis({
  data1 &lt;- data
  means &lt;- vapply(data1[, names(data1) != &quot;id&quot;], mean, numeric(1))

  for (i in seq_along(means)) {
    data1[, names(data1) != &quot;id&quot;][, i] &lt;- data1[, names(data1) != &quot;id&quot;][, i] - means[i]
  }
})</code></pre>
<div id="htmlwidget-2320" style="width:100%;height:300px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-2320">{"x":{"message":{"prof":{"time":[1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7,8,8,8,9,9,9,10,10,10,11,11,11,12,12,12,13,13,13,14,14,14,15,15,15,15,16,16,17,17,18,18,18,18,19,19,19,20,21,21,22,22,22,22,23,23,23,24,25,25,25,26,27,28,28,28,29,29,29,30,30,30,31,31,31,31,32,33,33,33,33,33,34,34,34,34,35,36,37,38,39,39,40,40,40,40,40,41,42,43,43,44,44,44,44,45,45,45,46,46,47,47,47,47,47,48,48,48,48,48,49,49,50,50,50,51,51,51,51,52,52,52,53,53,53,53,53,54,54,54,54,55,56,56,57,57,58,58,58,58,59,59,59,60,61,62,63,63,63,63,64,64,65,66,66,66,67,67,68,69,70,71,71,71,71,72,72,73,73,73,73,73,74,74,75,76,76,77,78,78,79,79,80,80,80,80],"depth":[3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,4,3,2,1,2,1,2,1,4,3,2,1,3,2,1,1,2,1,4,3,2,1,3,2,1,1,3,2,1,1,1,3,2,1,3,2,1,3,2,1,4,3,2,1,1,5,4,3,2,1,4,3,2,1,1,1,1,1,2,1,5,4,3,2,1,1,1,2,1,4,3,2,1,3,2,1,2,1,5,4,3,2,1,5,4,3,2,1,2,1,3,2,1,4,3,2,1,3,2,1,5,4,3,2,1,4,3,2,1,1,2,1,2,1,4,3,2,1,3,2,1,1,1,1,4,3,2,1,2,1,1,3,2,1,2,1,1,1,1,4,3,2,1,2,1,5,4,3,2,1,2,1,1,2,1,1,2,1,2,1,4,3,2,1],"label":["mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","mean.default","FUN","vapply","vapply","order","[<-.data.frame","[<-","[<-.data.frame","[<-","[<-.data.frame","[<-","rep_len","order","[<-.data.frame","[<-","vapply","[<-.data.frame","[<-","-","[<-.data.frame","[<-","vapply","order","[<-.data.frame","[<-","order","[<-.data.frame","[<-","-","<GC>","[<-.data.frame","[<-","-","-","%in%","[<-.data.frame","[<-","vapply","[<-.data.frame","[<-","vapply","[<-.data.frame","[<-","vapply","order","[<-.data.frame","[<-","-","match.fun","vapply","order","[<-.data.frame","[<-","<GC>","order","[<-.data.frame","[<-","-","-","-","-","[<-.data.frame","[<-","logical","vapply","order","[<-.data.frame","[<-","-","-","[<-.data.frame","[<-","<GC>","%in%","[.data.frame","[","order","[<-.data.frame","[<-","[<-.data.frame","[<-","lapply","unlist","order","[<-.data.frame","[<-","names","match","%in%","[<-.data.frame","[<-","[<-.data.frame","[<-","order","[<-.data.frame","[<-","unlist","order","[<-.data.frame","[<-","order","[<-.data.frame","[<-","<GC>","vapply","order","[<-.data.frame","[<-","vapply","order","[<-.data.frame","[<-","-","[<-.data.frame","[<-","[<-.data.frame","[<-","vapply","order","[<-.data.frame","[<-","length","[<-.data.frame","[<-","-","-","-","<GC>","order","[<-.data.frame","[<-","[<-.data.frame","[<-","data1[, names(data1) != \"id\"][, i] <- data1[, names(data1) != \"id\"][, i] - means[i]",".subset","[.data.frame","[","[<-.data.frame","[<-","-","-","-","vapply","order","[<-.data.frame","[<-","[<-.data.frame","[<-","<GC>","any","order","[<-.data.frame","[<-","[<-.data.frame","[<-","-","[<-.data.frame","[<-","-","[<-.data.frame","[<-","[<-.data.frame","[<-","rep_len","order","[<-.data.frame","[<-"],"filenum":[null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,null,null,1,1,1,1,1,1,null,null,1,1,null,1,1,1,1,1,null,null,1,1,null,1,1,1,null,1,1,1,1,null,1,1,null,1,1,null,1,1,null,null,1,1,1,null,null,null,1,1,null,null,1,1,1,1,1,1,1,1,null,null,null,1,1,1,1,1,1,null,null,1,1,null,1,1,1,1,null,null,null,1,1,null,null,null,1,1,1,1,null,1,1,null,null,1,1,null,1,1,null,null,null,1,1,null,null,1,1,1,1,1,1,1,null,null,1,1,null,1,1,1,1,1,null,null,1,1,1,1,1,null,1,1,1,1,1,1,1,null,null,1,1,1,1,null,null,null,1,1,1,1,1,1,1,1,1,1,1,1,null,null,1,1],"linenum":[null,null,3,null,null,3,null,null,3,null,null,3,null,null,3,null,null,3,null,null,3,null,null,3,null,null,3,null,null,3,null,null,3,null,null,3,null,null,3,null,null,3,null,null,6,6,6,6,6,6,null,null,6,6,null,6,6,6,6,6,null,null,6,6,null,6,6,6,null,6,6,6,6,null,6,6,null,6,6,null,6,6,null,null,6,6,6,null,null,null,6,6,null,null,6,6,6,6,6,6,6,6,null,null,null,6,6,6,6,6,6,null,null,6,6,null,6,6,6,6,null,null,null,6,6,null,null,null,6,6,6,6,null,6,6,null,null,6,6,null,6,6,null,null,null,6,6,null,null,6,6,6,6,6,6,6,null,null,6,6,null,6,6,6,6,6,null,null,6,6,6,6,6,null,6,6,6,6,6,6,6,null,null,6,6,6,6,null,null,null,6,6,6,6,6,6,6,6,6,6,6,6,null,null,6,6],"memalloc":[473.416954040527,473.416954040527,473.416954040527,473.417327880859,473.417327880859,473.417327880859,473.41796875,473.41796875,473.41796875,473.418342590332,473.418342590332,473.418342590332,473.418930053711,473.418930053711,473.418930053711,473.419357299805,473.419357299805,473.419357299805,473.419944763184,473.419944763184,473.419944763184,473.420372009277,473.420372009277,473.420372009277,473.42106628418,473.42106628418,473.42106628418,473.421493530273,473.421493530273,473.421493530273,473.422134399414,473.422134399414,473.422134399414,473.42261505127,473.42261505127,473.42261505127,473.42325592041,473.42325592041,473.42325592041,473.423683166504,473.423683166504,473.423683166504,476.495338439941,476.495338439941,476.495338439941,476.495338439941,483.602531433105,483.602531433105,494.241409301758,494.241409301758,501.407279968262,501.407279968262,501.407279968262,501.407279968262,511.970748901367,511.970748901367,511.970748901367,519.040710449219,526.548278808594,526.548278808594,533.43017578125,533.43017578125,533.43017578125,533.43017578125,543.948738098145,543.948738098145,543.948738098145,550.958190917969,551.399681091309,551.399681091309,551.399681091309,550.669921875,561.30908203125,568.411460876465,568.411460876465,568.411460876465,579.063018798828,579.063018798828,579.063018798828,586.157119750977,586.157119750977,586.157119750977,596.832183837891,596.832183837891,596.832183837891,596.832183837891,603.86572265625,614.621368408203,614.621368408203,614.621368408203,614.621368408203,614.621368408203,621.858795166016,621.858795166016,621.858795166016,621.858795166016,617.593452453613,624.686225891113,635.325386047363,642.418159484863,649.892578125,649.892578125,657.033622741699,657.033622741699,657.033622741699,657.033622741699,657.033622741699,670.789253234863,677.882026672363,688.5458984375,688.5458984375,688.401496887207,688.401496887207,688.401496887207,688.401496887207,688.275329589844,688.275329589844,688.275329589844,695.442276000977,695.442276000977,705.913925170898,705.913925170898,705.913925170898,705.913925170898,705.913925170898,712.884719848633,712.884719848633,712.884719848633,712.884719848633,712.884719848633,723.538848876953,723.538848876953,730.699501037598,730.699501037598,730.699501037598,741.377799987793,741.377799987793,741.377799987793,741.377799987793,748.461555480957,748.461555480957,748.461555480957,759.136817932129,759.136817932129,759.136817932129,759.136817932129,759.136817932129,748.387512207031,748.387512207031,748.387512207031,748.387512207031,762.134078979492,766.122383117676,766.122383117676,776.735145568848,776.735145568848,783.67960357666,783.67960357666,783.67960357666,783.67960357666,794.514572143555,794.514572143555,794.514572143555,804.690719604492,815.329879760742,822.422653198242,825.591911315918,825.591911315918,825.591911315918,825.591911315918,821.996032714844,821.996032714844,832.607093811035,836.642501831055,836.642501831055,836.642501831055,846.815986633301,846.815986633301,853.884262084961,864.523422241211,871.616195678711,879.06957244873,879.06957244873,879.06957244873,879.06957244873,886.089393615723,886.089393615723,896.485145568848,896.485145568848,896.485145568848,896.485145568848,896.485145568848,885.479888916016,885.479888916016,896.056846618652,903.177093505859,903.177093505859,913.788780212402,920.892601013184,920.892601013184,931.552490234375,931.552490234375,938.721038818359,938.721038818359,938.721038818359,938.721038818359],"meminc":[0,0,0,0.00037384033203125,0,0,0.000640869140625,0,0,0.00037384033203125,0,0,0.00058746337890625,0,0,0.00042724609375,0,0,0.00058746337890625,0,0,0.00042724609375,0,0,0.00069427490234375,0,0,0.00042724609375,0,0,0.000640869140625,0,0,0.00048065185546875,0,0,0.000640869140625,0,0,0.00042724609375,0,0,3.0716552734375,0,0,0,7.10719299316406,0,10.6388778686523,0,7.16587066650391,0,0,0,10.5634689331055,0,0,7.06996154785156,7.507568359375,0,6.88189697265625,0,0,0,10.5185623168945,0,0,7.00945281982422,0.441490173339844,0,0,-0.729759216308594,10.63916015625,7.10237884521484,0,0,10.6515579223633,0,0,7.09410095214844,0,0,10.6750640869141,0,0,0,7.03353881835938,10.7556457519531,0,0,0,0,7.2374267578125,0,0,0,-4.26534271240234,7.0927734375,10.63916015625,7.0927734375,7.47441864013672,0,7.14104461669922,0,0,0,0,13.7556304931641,7.0927734375,10.6638717651367,0,-0.144401550292969,0,0,0,-0.126167297363281,0,0,7.16694641113281,0,10.4716491699219,0,0,0,0,6.97079467773438,0,0,0,0,10.6541290283203,0,7.16065216064453,0,0,10.6782989501953,0,0,0,7.08375549316406,0,0,10.6752624511719,0,0,0,0,-10.7493057250977,0,0,0,13.7465667724609,3.98830413818359,0,10.6127624511719,0,6.9444580078125,0,0,0,10.8349685668945,0,0,10.1761474609375,10.63916015625,7.0927734375,3.16925811767578,0,0,0,-3.59587860107422,0,10.6110610961914,4.03540802001953,0,0,10.1734848022461,0,7.06827545166016,10.63916015625,7.0927734375,7.45337677001953,0,0,0,7.01982116699219,0,10.395751953125,0,0,0,0,-11.005256652832,0,10.5769577026367,7.12024688720703,0,10.611686706543,7.10382080078125,0,10.6598892211914,0,7.16854858398438,0,0,0],"filename":[null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,null,"<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,null,"<expr>","<expr>",null,"<expr>","<expr>",null,null,null,"<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>"]},"interval":10,"files":[{"filename":"<expr>","content":"profvis({\n  data1 <- data\n  means <- vapply(data1[, names(data1) != \"id\"], mean, numeric(1))\n\n  for (i in seq_along(means)) {\n    data1[, names(data1) != \"id\"][, i] <- data1[, names(data1) != \"id\"][, i] - means[i]\n  }\n})","normpath":"<expr>"}],"prof_output":"/tmp/Rtmpr7ph7T/file1f77735aa830.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"v"}},"evals":[],"jsHooks":[]}</script>
<p>Our code is about 3x faster than the original version. Most of the time is now spent on line 6, and the majority of that is in the <code>[&lt;-</code> function. This is usually called with syntax <code>x[i, j] &lt;- y</code>, which is equivalent to <code>`[&lt;-`(x, i, j, y)</code>. In addition to being slow, the code is ugly: on each side of the assignment operator we’re indexing into <code>data1</code> twice with <code>[</code>.</p>
<p>In this case, it’s useful to take a step back and think about the broader problem. We want to normalize each column. Couldn’t we we apply a function over the columns that does both steps, taking the mean and subtracting it? Because a data frame is a list, and we want to assign a list of values into the data frame, we’ll need to use <code>lapply</code>.</p>
<pre class="r"><code>profvis({
  data1 &lt;- data

  # Given a column, normalize values and return them
  col_norm &lt;- function(col) {
    col - mean(col)
  }

  # Apply the normalizer function over all columns except id
  data1[, names(data1) != &quot;id&quot;] &lt;- lapply(data1[, names(data1) != &quot;id&quot;], col_norm)
})</code></pre>
<div id="htmlwidget-9985" style="width:100%;height:350px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-9985">{"x":{"message":{"prof":{"time":[1,1,1,2,2,2,2,3,3,3,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,8,8,8,9,9,9,10,10,10,11,11,11,11,12,12,12,12,13,13,13,14,14,14,15,15,15,16,16,16,17,17,17,18,18,18,18,19,19,19,19,20,20,20,21,21,21,22,22,22,23,23,23,24,24,24,25,25,25,26,26,26,27,27,27,27,28,28,28,28,29,29,29,30,30,30,30,31,31,31,31],"depth":[3,2,1,4,3,2,1,3,2,1,3,2,1,4,3,2,1,4,3,2,1,4,3,2,1,3,2,1,3,2,1,3,2,1,4,3,2,1,4,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,4,3,2,1,4,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,4,3,2,1,4,3,2,1,3,2,1,4,3,2,1,4,3,2,1],"label":["-","FUN","lapply","mean.default","mean","FUN","lapply","-","FUN","lapply","-","FUN","lapply","mean.default","mean","FUN","lapply","mean.default","mean","FUN","lapply","mean.default","mean","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","mean.default","mean","FUN","lapply","mean.default","mean","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","mean.default","mean","FUN","lapply","mean.default","mean","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","-","FUN","lapply","mean.default","mean","FUN","lapply","mean.default","mean","FUN","lapply","-","FUN","lapply","mean.default","mean","FUN","lapply","mean.default","mean","FUN","lapply"],"filenum":[1,null,1,null,1,null,1,1,null,1,1,null,1,null,1,null,1,null,1,null,1,null,1,null,1,1,null,1,1,null,1,1,null,1,null,1,null,1,null,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,null,1,null,1,null,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,1,null,1,null,1,null,1,null,1,null,1,1,null,1,null,1,null,1,null,1,null,1],"linenum":[6,null,10,null,6,null,10,6,null,10,6,null,10,null,6,null,10,null,6,null,10,null,6,null,10,6,null,10,6,null,10,6,null,10,null,6,null,10,null,6,null,10,6,null,10,6,null,10,6,null,10,6,null,10,6,null,10,null,6,null,10,null,6,null,10,6,null,10,6,null,10,6,null,10,6,null,10,6,null,10,6,null,10,6,null,10,null,6,null,10,null,6,null,10,6,null,10,null,6,null,10,null,6,null,10],"memalloc":[952.545707702637,952.545707702637,952.545707702637,964.753005981445,964.753005981445,964.753005981445,964.753005981445,983.063819885254,983.063819885254,983.063819885254,995.271064758301,995.271064758301,995.271064758301,1010.53017425537,1010.53017425537,1010.53017425537,1010.53017425537,1022.73741912842,1022.73741912842,1022.73741912842,1022.73741912842,1041.04828643799,1041.04828643799,1041.04828643799,1041.04828643799,1053.25547790527,1053.25547790527,1053.25547790527,1071.56634521484,1071.56634521484,1071.56634521484,1083.77359008789,1083.77359008789,1083.77359008789,1099.03269958496,1099.03269958496,1099.03269958496,1099.03269958496,1111.23994445801,1111.23994445801,1111.23994445801,1111.23994445801,1129.55075836182,1129.55075836182,1129.55075836182,1141.75800323486,1141.75800323486,1141.75800323486,1157.01705932617,1157.01705932617,1157.01705932617,1169.22430419922,1169.22430419922,1169.22430419922,1184.48336029053,1184.48336029053,1184.48336029053,1193.63884735107,1193.63884735107,1193.63884735107,1193.63884735107,1211.94971466064,1211.94971466064,1211.94971466064,1211.94971466064,1224.15690612793,1224.15690612793,1224.15690612793,1242.4677734375,1242.4677734375,1242.4677734375,1254.67501831055,1254.67501831055,1254.67501831055,1272.98588562012,1272.98588562012,1272.98588562012,1285.19313049316,1285.19313049316,1285.19313049316,1300.45218658447,1300.45218658447,1300.45218658447,1312.65943145752,1312.65943145752,1312.65943145752,1327.91854095459,1327.91854095459,1327.91854095459,1327.91854095459,1340.12578582764,1340.12578582764,1340.12578582764,1340.12578582764,1358.43659973145,1358.43659973145,1358.43659973145,1367.59208679199,1367.59208679199,1367.59208679199,1367.59208679199,1385.90295410156,1385.90295410156,1385.90295410156,1385.90295410156],"meminc":[0,0,0,12.2072982788086,0,0,0,18.3108139038086,0,0,12.2072448730469,0,0,15.2591094970703,0,0,0,12.2072448730469,0,0,0,18.3108673095703,0,0,0,12.2071914672852,0,0,18.3108673095703,0,0,12.2072448730469,0,0,15.2591094970703,0,0,0,12.2072448730469,0,0,0,18.3108139038086,0,0,12.2072448730469,0,0,15.2590560913086,0,0,12.2072448730469,0,0,15.2590560913086,0,0,9.15548706054688,0,0,0,18.3108673095703,0,0,0,12.2071914672852,0,0,18.3108673095703,0,0,12.2072448730469,0,0,18.3108673095703,0,0,12.2072448730469,0,0,15.2590560913086,0,0,12.2072448730469,0,0,15.2591094970703,0,0,0,12.2072448730469,0,0,0,18.3108139038086,0,0,9.15548706054688,0,0,0,18.3108673095703,0,0,0],"filename":["<expr>",null,"<expr>",null,"<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>","<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>","<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>",null,"<expr>"]},"interval":10,"files":[{"filename":"<expr>","content":"profvis({\n  data1 <- data\n\n  # Given a column, normalize values and return them\n  col_norm <- function(col) {\n    col - mean(col)\n  }\n\n  # Apply the normalizer function over all columns except id\n  data1[, names(data1) != \"id\"] <- lapply(data1[, names(data1) != \"id\"], col_norm)\n})","normpath":"<expr>"}],"prof_output":"/tmp/Rtmpr7ph7T/file1f77110dbc59.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"v"}},"evals":[],"jsHooks":[]}</script>
<p>Now we have code that’s not only about 8x faster than our original – it’s shorter and more elegant as well. Not bad! The profiler data helped us to identify performance bottlenecks, and understanding of the underlying data structures allowed us to approach the problem in a more efficient way.</p>
<p>Could we further optimize the code? It seems unlikely, given that all the time is spent in functions that are implemented in C (<code>mean</code> and <code>-</code>). That doesn’t necessarily mean that there’s no room for improvement, but this is a good place to move on to the next example.</p>
</div>
<div id="example-2" class="section level3">
<h3>Example 2</h3>
<p>This example addresses some more advanced issues. This time, it will be hard to directly see the causes of slowness, but we will be able to see some of their side-effects, most notably the side-effects from large amounts of memory allocation.</p>
<p>Suppose you have a data frame that contains a column for which you’d like to take a cumulative sum (and you don’t know about R’s built-in <code>cumsum</code> function). Here’s one way to do it:</p>
<pre class="r"><code>profvis({
  data &lt;- data.frame(value = runif(3e4))

  data$sum[1] &lt;- data$value[1]
  for (i in seq(2, nrow(data))) {
    data$sum[i] &lt;- data$sum[i-1] + data$value[i]
  }
})</code></pre>
<div id="htmlwidget-2956" style="width:100%;height:300px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-2956">{"x":{"message":{"prof":{"time":[1,2,3,4,5,6,7,8,8,9,9,9,9,9,9,10,10,10,10,11,12,12,12,12,13,14,15,16,16,17,18,19,20,21,22,22,23,24,25,25,25,25,26,27,27,27,28,28,29,29,30,31,32,32,32,32,32,32,33,34,35,35,35,35,36,36,36,37,38,39,40,40,41,42,42,42,43,44,44,44,45,46,47,48,49,50,50,50,50,50,51,51,51,52,52,52,52,52,53,54,54,55,56,57,58,59,60,60,60,61,61,61,61,61,62,62,62,62,62,63,64,65,66,67,68,68,68,68,69,70,70,71,72,72,72,72,72,72,73,73,73,73,74,75,75,75,75,75,75,76,77,77,78,78,78,78,78,79,80,80,80,80,80,81,82,82,82,82,82,82,82,83,84,84,84,84,84,84,85,86,86,86,86,86,87,87,87,88,88,88,88,88,88,89,89,89,89,89,89,89,90,90,90,91,92,93,94,95,96,97,98,99,100,100,101,101,101,102,102,102,102,102,102,103,104,104,104,105,106,106,106,106,107,107,108,109,110,111,111,111,111,111,111,111,112,112,112,112,113,114,115,115,115,116,116,117,118,119,120,121,122,123,124,124,124,124,124,124,125,125,125,125,125,126,127,128,129,129,129,129,129,129,130,130,131,131,131,131,131,132,133,134,135,136,136,136,136,136,137,138,139,140,140,140,140,141,141,141,141,141,141,142,143,143,143,144,144,144,144,144,145,146,146,146,146,146,146,147,148,149,149,149,149,149,149,150,151,151,152,152,153,153,154,154,154,154,154,154,155,156,157,157,157,157,157,157,158,159,159,159,159,160,160,160,160,160,160,161,162,163,164,165,165,165,165,165,165,165,166,166,167,168,168,168,168,168,168,169,169,169,170,171,172,173,174,174,174,175,175,176,176,176,176,176,176,177,177,178,179,179,179,179,179,179,180,181,182,183,183,183,183,183,184,184,184,185,186,186,186,186,186,187,188,188,188,188,188,188,188,189,190,190,190,190,190,190,190,191,192,193,193,193,194,194,195,196,196,196,197,197,197,197,197,197,197,198,199,200,201,202,203],"depth":[1,1,1,1,1,1,1,2,1,6,5,4,3,2,1,4,3,2,1,1,4,3,2,1,1,1,1,2,1,1,1,1,1,1,2,1,1,1,4,3,2,1,1,3,2,1,2,1,2,1,1,1,6,5,4,3,2,1,1,1,4,3,2,1,3,2,1,1,1,1,2,1,1,3,2,1,1,3,2,1,1,1,1,1,1,5,4,3,2,1,3,2,1,5,4,3,2,1,1,2,1,1,1,1,1,1,3,2,1,5,4,3,2,1,5,4,3,2,1,1,1,1,1,1,4,3,2,1,1,2,1,1,6,5,4,3,2,1,4,3,2,1,1,6,5,4,3,2,1,1,2,1,5,4,3,2,1,1,5,4,3,2,1,1,7,6,5,4,3,2,1,1,6,5,4,3,2,1,1,5,4,3,2,1,3,2,1,6,5,4,3,2,1,7,6,5,4,3,2,1,3,2,1,1,1,1,1,1,1,1,1,1,2,1,3,2,1,6,5,4,3,2,1,1,3,2,1,1,4,3,2,1,2,1,1,1,1,7,6,5,4,3,2,1,4,3,2,1,1,1,3,2,1,2,1,1,1,1,1,1,1,1,6,5,4,3,2,1,5,4,3,2,1,1,1,1,6,5,4,3,2,1,2,1,5,4,3,2,1,1,1,1,1,5,4,3,2,1,1,1,1,4,3,2,1,6,5,4,3,2,1,1,3,2,1,5,4,3,2,1,1,6,5,4,3,2,1,1,1,6,5,4,3,2,1,1,2,1,2,1,2,1,6,5,4,3,2,1,1,1,6,5,4,3,2,1,1,4,3,2,1,6,5,4,3,2,1,1,1,1,1,7,6,5,4,3,2,1,2,1,1,6,5,4,3,2,1,3,2,1,1,1,1,1,3,2,1,2,1,6,5,4,3,2,1,2,1,1,6,5,4,3,2,1,1,1,1,5,4,3,2,1,3,2,1,1,5,4,3,2,1,1,7,6,5,4,3,2,1,1,7,6,5,4,3,2,1,1,1,3,2,1,2,1,1,3,2,1,7,6,5,4,3,2,1,1,1,1,1,1,1],"label":["data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","$<-.data.frame","$<-","match","%in%","[[.data.frame","[[","$.data.frame","$","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","$<-","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","all","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","[[.data.frame","[[","$.data.frame","$","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","$<-.data.frame","$<-","data$sum[i] <- data$sum[i-1] + data$value[i]","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<Anonymous>","[[.data.frame","[[","$.data.frame","$","[[","$.data.frame","$","<GC>","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","$<-","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","$.data.frame","$","<Anonymous>","[[.data.frame","[[","$.data.frame","$","<GC>","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","length","NROW","$<-.data.frame","$<-","data$sum[i] <- data$sum[i-1] + data$value[i]","$<-.data.frame","$<-","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","<Anonymous>","[[.data.frame","[[","$.data.frame","$","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]",".subset2","<Anonymous>","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","$.data.frame","$","<Anonymous>","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","<Anonymous>","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","match","%in%","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","match","%in%","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","<Anonymous>","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","$<-.data.frame","$<-","match","%in%","[[.data.frame","[[","$.data.frame","$","names","match","%in%","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","$.data.frame","$","match","%in%","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]",".row_names_info","$<-.data.frame","$<-","data$sum[i] <- data$sum[i-1] + data$value[i]","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","sys.call","match","%in%","[[.data.frame","[[","$.data.frame","$","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<GC>","%in%","[[.data.frame","[[","$.data.frame","$","%in%","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","match","%in%","[[.data.frame","[[","$.data.frame","$","$<-.data.frame","$<-","<Anonymous>","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","<Anonymous>","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","[[.data.frame","[[","$.data.frame","$","match","%in%","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","[[","$.data.frame","$","<Anonymous>","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","match","%in%","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","match","%in%","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","$<-.data.frame","$<-","data$sum[i] <- data$sum[i-1] + data$value[i]","$","data$sum[i] <- data$sum[i-1] + data$value[i]","$","match","%in%","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","match","%in%","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","[[.data.frame","[[","$.data.frame","$","is.matrix","<Anonymous>","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","sys.call","match","%in%","[[.data.frame","[[","$.data.frame","$","$<-.data.frame","$<-","data$sum[i] <- data$sum[i-1] + data$value[i]","match","%in%","[[.data.frame","[[","$.data.frame","$","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","$",".subset2","<Anonymous>","[[.data.frame","[[","$.data.frame","$","$<-.data.frame","$<-","data$sum[i] <- data$sum[i-1] + data$value[i]","match","%in%","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","all","[[.data.frame","[[","$.data.frame","$","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","%in%","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","sys.call","match","%in%","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","sys.call","match","%in%","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]",".row_names_info","$<-.data.frame","$<-","data$sum[i] <- data$sum[i-1] + data$value[i]","$<-","data$sum[i] <- data$sum[i-1] + data$value[i]","[[","$.data.frame","$","sys.call","match","%in%","[[.data.frame","[[","$.data.frame","$","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]","data$sum[i] <- data$sum[i-1] + data$value[i]"],"filenum":[1,1,1,1,1,1,1,1,1,null,null,null,null,1,1,null,null,1,1,1,null,null,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,1,null,null,1,1,1,null,1,1,1,1,1,1,1,1,null,null,null,null,1,1,1,1,null,null,1,1,null,1,1,1,1,1,1,1,1,null,1,1,1,null,1,1,1,1,1,1,1,null,null,null,1,1,null,1,1,null,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,null,1,1,null,null,null,1,1,1,1,1,1,1,null,null,1,1,1,1,1,1,null,null,null,null,1,1,null,null,1,1,1,null,null,null,null,1,1,1,1,1,null,null,null,1,1,1,null,null,null,1,1,1,null,null,null,null,null,1,1,1,null,null,null,null,1,1,1,null,null,null,1,1,1,1,1,null,null,null,null,1,1,null,null,null,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,null,null,1,1,1,null,1,1,1,null,null,1,1,1,1,1,1,1,null,null,null,null,null,1,1,null,null,1,1,1,1,null,1,1,1,1,1,1,1,1,1,1,1,null,null,null,null,1,1,null,null,null,1,1,1,1,1,null,null,null,null,1,1,1,1,null,null,null,1,1,1,1,1,1,null,null,null,1,1,1,1,1,null,null,1,1,null,null,null,null,1,1,1,null,1,1,null,null,null,1,1,1,null,null,null,null,1,1,1,1,null,null,null,null,1,1,1,1,1,1,1,1,1,null,null,null,null,1,1,1,1,null,null,null,null,1,1,1,null,null,1,1,null,null,null,null,1,1,1,1,1,1,null,null,null,null,null,1,1,1,1,1,null,null,null,null,1,1,null,1,1,1,1,1,1,null,1,1,1,1,null,null,null,null,1,1,1,1,1,null,null,null,null,1,1,1,1,1,null,null,null,1,1,null,1,1,1,null,null,null,1,1,1,null,null,null,null,null,1,1,1,null,null,null,null,null,1,1,1,1,null,1,1,1,1,1,null,1,1,null,null,null,null,null,1,1,1,1,1,1,1,1],"linenum":[6,6,6,6,6,6,6,6,6,null,null,null,null,6,6,null,null,6,6,6,null,null,6,6,6,6,6,6,6,6,6,6,6,6,null,6,6,6,null,null,6,6,6,null,6,6,6,6,6,6,6,6,null,null,null,null,6,6,6,6,null,null,6,6,null,6,6,6,6,6,6,6,6,null,6,6,6,null,6,6,6,6,6,6,6,null,null,null,6,6,null,6,6,null,null,null,6,6,6,6,6,6,6,6,6,6,6,6,6,null,null,null,6,6,null,null,null,6,6,6,6,6,6,6,null,null,6,6,6,6,6,6,null,null,null,null,6,6,null,null,6,6,6,null,null,null,null,6,6,6,6,6,null,null,null,6,6,6,null,null,null,6,6,6,null,null,null,null,null,6,6,6,null,null,null,null,6,6,6,null,null,null,6,6,6,6,6,null,null,null,null,6,6,null,null,null,null,null,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,null,null,null,null,6,6,6,null,6,6,6,null,null,6,6,6,6,6,6,6,null,null,null,null,null,6,6,null,null,6,6,6,6,null,6,6,6,6,6,6,6,6,6,6,6,null,null,null,null,6,6,null,null,null,6,6,6,6,6,null,null,null,null,6,6,6,6,null,null,null,6,6,6,6,6,6,null,null,null,6,6,6,6,6,null,null,6,6,null,null,null,null,6,6,6,null,6,6,null,null,null,6,6,6,null,null,null,null,6,6,6,6,null,null,null,null,6,6,6,6,6,6,6,6,6,null,null,null,null,6,6,6,6,null,null,null,null,6,6,6,null,null,6,6,null,null,null,null,6,6,6,6,6,6,null,null,null,null,null,6,6,6,6,6,null,null,null,null,6,6,null,6,6,6,6,6,6,null,6,6,6,6,null,null,null,null,6,6,6,6,6,null,null,null,null,6,6,6,6,6,null,null,null,6,6,null,6,6,6,null,null,null,6,6,6,null,null,null,null,null,6,6,6,null,null,null,null,null,6,6,6,6,null,6,6,6,6,6,null,6,6,null,null,null,null,null,6,6,6,6,6,6,6,6],"memalloc":[975.564392089844,998.036682128906,1031.05718994141,1051.46569824219,1088.84310150146,1108.1050567627,1142.27220916748,1165.66171264648,1165.66171264648,1201.20494842529,1201.20494842529,1201.20494842529,1201.20494842529,1201.20494842529,1201.20494842529,1228.03396606445,1228.03396606445,1228.03396606445,1228.03396606445,1268.85070800781,1275.50082397461,1275.50082397461,1275.50082397461,1275.50082397461,964.324722290039,994.823059082031,1040.45533752441,1070.49517059326,1070.49517059326,1116.35664367676,1146.85475158691,1192.71656799316,1222.98536682129,1264.71961975098,1276.41438293457,1276.41438293457,957.903388977051,980.604988098145,1023.25685119629,1023.25685119629,1023.25685119629,1023.25685119629,1053.06665802002,1098.01148223877,1098.01148223877,1098.01148223877,1128.28005981445,1128.28005981445,1172.99566650391,1172.99566650391,1203.03479766846,1247.97937774658,1276.64331817627,1276.64331817627,1276.64331817627,1276.64331817627,1276.64331817627,1276.64331817627,944.602813720703,974.183685302734,1020.04565429688,1020.04565429688,1020.04565429688,1020.04565429688,1050.31465911865,1050.31465911865,1050.31465911865,1096.17611694336,1126.21560668945,1172.0774230957,1202.11727142334,1202.11727142334,1247.74942016602,1277.10108947754,1277.10108947754,1277.10108947754,944.602264404297,975.100509643555,975.100509643555,975.100509643555,1021.19149780273,1051.68960571289,1097.32211303711,1127.59111785889,1173.45272827148,1203.72194671631,1203.72194671631,1203.72194671631,1203.72194671631,1203.72194671631,1249.35417175293,1249.35417175293,1249.35417175293,1277.33001708984,1277.33001708984,1277.33001708984,1277.33001708984,1277.33001708984,946.436210632324,977.163665771484,977.163665771484,1022.5668258667,1052.14769744873,1097.09227752686,1127.13176727295,1172.76427459717,1203.03321075439,1203.03321075439,1203.03321075439,1248.20738983154,1248.20738983154,1248.20738983154,1248.20738983154,1248.20738983154,1277.55889892578,1277.55889892578,1277.55889892578,1277.55889892578,1277.55889892578,950.104698181152,976.704551696777,1022.10774993896,1051.45931243896,1097.09181976318,1127.36068725586,1127.36068725586,1127.36068725586,1127.36068725586,1172.99312591553,1203.26203918457,1203.26203918457,1248.66512298584,1277.78779602051,1277.78779602051,1277.78779602051,1277.78779602051,1277.78779602051,1277.78779602051,945.518295288086,945.518295288086,945.518295288086,945.518295288086,976.245544433594,1022.33687591553,1022.33687591553,1022.33687591553,1022.33687591553,1022.33687591553,1022.33687591553,1052.14685058594,1097.09163665771,1097.09163665771,1126.90191650391,1126.90191650391,1126.90191650391,1126.90191650391,1126.90191650391,1172.53411865234,1203.0326461792,1203.0326461792,1203.0326461792,1203.0326461792,1203.0326461792,1248.89404296875,1278.01671600342,1278.01671600342,1278.01671600342,1278.01671600342,1278.01671600342,1278.01671600342,1278.01671600342,951.021202087402,976.933403015137,976.933403015137,976.933403015137,976.933403015137,976.933403015137,976.933403015137,1023.02425384521,1053.06404876709,1053.06404876709,1053.06404876709,1053.06404876709,1053.06404876709,1098.92560577393,1098.92560577393,1098.92560577393,1128.04811859131,1128.04811859131,1128.04811859131,1128.04811859131,1128.04811859131,1128.04811859131,1172.07557678223,1172.07557678223,1172.07557678223,1172.07557678223,1172.07557678223,1172.07557678223,1172.07557678223,1201.65627288818,1201.65627288818,1201.65627288818,1241.555809021,1271.36598968506,937.721046447754,968.448463439941,1014.76889801025,1044.80850982666,1090.44089508057,1120.70969390869,1165.88389587402,1196.38182830811,1196.38182830811,1241.78502655029,1241.78502655029,1241.78502655029,1272.28338623047,1272.28338623047,1272.28338623047,1272.28338623047,1272.28338623047,1272.28338623047,942.536323547363,970.282783508301,970.282783508301,970.282783508301,1016.14453887939,1046.4135055542,1046.4135055542,1046.4135055542,1046.4135055542,1091.81689453125,1091.81689453125,1122.54395294189,1167.94715118408,1198.44525909424,1243.84884643555,1243.84884643555,1243.84884643555,1243.84884643555,1243.84884643555,1243.84884643555,1243.84884643555,1274.57613372803,1274.57613372803,1274.57613372803,1274.57613372803,938.181365966797,969.138092041016,1015.00004577637,1015.00004577637,1015.00004577637,1040.22402954102,1040.22402954102,1067.51168823242,1086.54434204102,1118.18899536133,1144.55953979492,1187.89895629883,1216.56259155273,1259.90200805664,1276.41265106201,1276.41265106201,1276.41265106201,1276.41265106201,1276.41265106201,1276.41265106201,939.098426818848,939.098426818848,939.098426818848,939.098426818848,939.098426818848,966.386009216309,1012.70644378662,1042.74593353271,1088.37860870361,1088.37860870361,1088.37860870361,1088.37860870361,1088.37860870361,1088.37860870361,1118.87659454346,1118.87659454346,1164.28017425537,1164.28017425537,1164.28017425537,1164.28017425537,1164.28017425537,1193.63130950928,1234.44832611084,1264.48781585693,936.804801940918,967.532531738281,967.532531738281,967.532531738281,967.532531738281,967.532531738281,1014.08196258545,1044.12145233154,1089.7541885376,1120.25234222412,1120.25234222412,1120.25234222412,1120.25234222412,1165.65543365479,1165.65543365479,1165.65543365479,1165.65543365479,1165.65543365479,1165.65543365479,1196.15337371826,1241.09809112549,1241.09809112549,1241.09809112549,1268.15673828125,1268.15673828125,1268.15673828125,1268.15673828125,1268.15673828125,940.473487854004,971.430488586426,971.430488586426,971.430488586426,971.430488586426,971.430488586426,971.430488586426,1017.5213394165,1047.79013824463,1093.42306518555,1093.42306518555,1093.42306518555,1093.42306518555,1093.42306518555,1093.42306518555,1124.15006256104,1169.55336761475,1169.55336761475,1200.05172729492,1200.05172729492,1241.09812164307,1241.09812164307,1271.13757324219,1271.13757324219,1271.13757324219,1271.13757324219,1271.13757324219,1271.13757324219,943.454261779785,974.640296936035,1020.50228118896,1020.50228118896,1020.50228118896,1020.50228118896,1020.50228118896,1020.50228118896,1050.54160308838,1095.94506072998,1095.94506072998,1095.94506072998,1095.94506072998,1126.44310760498,1126.44310760498,1126.44310760498,1126.44310760498,1126.44310760498,1126.44310760498,1168.40647125244,1198.2166519165,1242.2439956665,1269.53177642822,942.077987670898,942.077987670898,942.077987670898,942.077987670898,942.077987670898,942.077987670898,942.077987670898,972.346664428711,972.346664428711,1018.43774414062,1048.70681762695,1048.70681762695,1048.70681762695,1048.70681762695,1048.70681762695,1048.70681762695,1094.56871795654,1094.56871795654,1094.56871795654,1125.52508544922,1170.24035644531,1200.50915527344,1241.78479003906,1271.82443237305,1271.82443237305,1271.82443237305,944.600204467773,944.600204467773,975.557235717773,975.557235717773,975.557235717773,975.557235717773,975.557235717773,975.557235717773,1021.4186706543,1021.4186706543,1051.68742370605,1097.09101104736,1097.09101104736,1097.09101104736,1097.09101104736,1097.09101104736,1097.09101104736,1127.81803894043,1173.22123718262,1203.71934509277,1248.43481445312,1248.43481445312,1248.43481445312,1248.43481445312,1248.43481445312,1275.03484344482,1275.03484344482,1275.03484344482,948.039222717285,978.766807556152,978.766807556152,978.766807556152,978.766807556152,978.766807556152,1024.62845611572,1054.6681137085,1054.6681137085,1054.6681137085,1054.6681137085,1054.6681137085,1054.6681137085,1054.6681137085,1098.23667144775,1127.81781768799,1127.81781768799,1127.81781768799,1127.81781768799,1127.81781768799,1127.81781768799,1127.81781768799,1172.30393218994,1203.03092193604,1244.07730865479,1244.07730865479,1244.07730865479,1274.1167755127,1274.1167755127,946.892539978027,977.849082946777,977.849082946777,977.849082946777,1023.48162078857,1023.48162078857,1023.48162078857,1023.48162078857,1023.48162078857,1023.48162078857,1023.48162078857,1053.75025177002,1099.38275909424,1130.11017608643,1175.51337432861,1206.2407913208,1249.80951690674],"meminc":[0,22.4722900390625,33.0205078125,20.4085083007812,37.3774032592773,19.2619552612305,34.1671524047852,23.3895034790039,0,35.5432357788086,0,0,0,0,0,26.8290176391602,0,0,0,40.8167419433594,6.65011596679688,0,0,0,-311.17610168457,30.4983367919922,45.6322784423828,30.0398330688477,0,45.8614730834961,30.4981079101562,45.86181640625,30.268798828125,41.7342529296875,11.6947631835938,0,-318.51099395752,22.7015991210938,42.6518630981445,0,0,0,29.8098068237305,44.94482421875,0,0,30.2685775756836,0,44.7156066894531,0,30.0391311645508,44.944580078125,28.6639404296875,0,0,0,0,0,-332.040504455566,29.5808715820312,45.8619689941406,0,0,0,30.2690048217773,0,0,45.861457824707,30.0394897460938,45.86181640625,30.0398483276367,0,45.6321487426758,29.3516693115234,0,0,-332.498825073242,30.4982452392578,0,0,46.0909881591797,30.4981079101562,45.6325073242188,30.2690048217773,45.8616104125977,30.2692184448242,0,0,0,0,45.6322250366211,0,0,27.9758453369141,0,0,0,0,-330.89380645752,30.7274551391602,0,45.4031600952148,29.5808715820312,44.944580078125,30.0394897460938,45.6325073242188,30.2689361572266,0,0,45.1741790771484,0,0,0,0,29.3515090942383,0,0,0,0,-327.454200744629,26.599853515625,45.4031982421875,29.3515625,45.6325073242188,30.2688674926758,0,0,0,45.632438659668,30.268913269043,0,45.4030838012695,29.122673034668,0,0,0,0,0,-332.269500732422,0,0,0,30.7272491455078,46.0913314819336,0,0,0,0,0,29.8099746704102,44.9447860717773,0,29.8102798461914,0,0,0,0,45.6322021484375,30.4985275268555,0,0,0,0,45.8613967895508,29.122673034668,0,0,0,0,0,0,-326.995513916016,25.9122009277344,0,0,0,0,0,46.0908508300781,30.039794921875,0,0,0,0,45.8615570068359,0,0,29.1225128173828,0,0,0,0,0,44.027458190918,0,0,0,0,0,0,29.580696105957,0,0,39.8995361328125,29.8101806640625,-333.644943237305,30.7274169921875,46.3204345703125,30.0396118164062,45.6323852539062,30.268798828125,45.174201965332,30.497932434082,0,45.4031982421875,0,0,30.4983596801758,0,0,0,0,0,-329.747062683105,27.7464599609375,0,0,45.8617553710938,30.2689666748047,0,0,0,45.4033889770508,0,30.7270584106445,45.4031982421875,30.4981079101562,45.4035873413086,0,0,0,0,0,0,30.7272872924805,0,0,0,-336.39476776123,30.9567260742188,45.8619537353516,0,0,25.2239837646484,0,27.2876586914062,19.0326538085938,31.6446533203125,26.3705444335938,43.3394165039062,28.6636352539062,43.3394165039062,16.5106430053711,0,0,0,0,0,-337.314224243164,0,0,0,0,27.2875823974609,46.3204345703125,30.0394897460938,45.6326751708984,0,0,0,0,0,30.4979858398438,0,45.4035797119141,0,0,0,0,29.3511352539062,40.8170166015625,30.0394897460938,-327.683013916016,30.7277297973633,0,0,0,0,46.549430847168,30.0394897460938,45.6327362060547,30.4981536865234,0,0,0,45.4030914306641,0,0,0,0,0,30.4979400634766,44.9447174072266,0,0,27.0586471557617,0,0,0,0,-327.683250427246,30.9570007324219,0,0,0,0,0,46.0908508300781,30.268798828125,45.632926940918,0,0,0,0,0,30.7269973754883,45.4033050537109,0,30.4983596801758,0,41.0463943481445,0,30.0394515991211,0,0,0,0,0,-327.683311462402,31.18603515625,45.8619842529297,0,0,0,0,0,30.0393218994141,45.4034576416016,0,0,0,30.498046875,0,0,0,0,0,41.9633636474609,29.8101806640625,44.02734375,27.2877807617188,-327.453788757324,0,0,0,0,0,0,30.2686767578125,0,46.0910797119141,30.2690734863281,0,0,0,0,0,45.8619003295898,0,0,30.9563674926758,44.7152709960938,30.268798828125,41.275634765625,30.0396423339844,0,0,-327.224227905273,0,30.95703125,0,0,0,0,0,45.8614349365234,0,30.2687530517578,45.4035873413086,0,0,0,0,0,30.7270278930664,45.4031982421875,30.4981079101562,44.7154693603516,0,0,0,0,26.6000289916992,0,0,-326.995620727539,30.7275848388672,0,0,0,0,45.8616485595703,30.0396575927734,0,0,0,0,0,0,43.5685577392578,29.5811462402344,0,0,0,0,0,0,44.4861145019531,30.7269897460938,41.04638671875,0,0,30.0394668579102,0,-327.224235534668,30.95654296875,0,0,45.6325378417969,0,0,0,0,0,0,30.2686309814453,45.6325073242188,30.7274169921875,45.4031982421875,30.7274169921875,43.5687255859375],"filename":["<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>",null,null,"<expr>","<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>",null,null,"<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>",null,"<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>",null,null,"<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>",null,null,null,null,null,"<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>",null,null,null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,null,"<expr>","<expr>",null,null,"<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>",null,null,"<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>",null,null,"<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>",null,"<expr>","<expr>","<expr>",null,null,null,"<expr>","<expr>","<expr>",null,null,null,null,null,"<expr>","<expr>","<expr>",null,null,null,null,null,"<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>",null,null,null,null,null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>"]},"interval":10,"files":[{"filename":"<expr>","content":"profvis({\n  data <- data.frame(value = runif(3e4))\n\n  data$sum[1] <- data$value[1]\n  for (i in seq(2, nrow(data))) {\n    data$sum[i] <- data$sum[i-1] + data$value[i]\n  }\n})","normpath":"<expr>"}],"prof_output":"/tmp/Rtmpr7ph7T/file1f7733238c6f.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"v"}},"evals":[],"jsHooks":[]}</script>
<p>This takes over 2 seconds to calculate the cumulative sum of 30,000 items. That’s pretty slow for a computer program. Looking at the profvis visualization, we can see a number of notable features:</p>
<p>Almost all the time is spent in one line of code, line 6. Although this is just one line of code, many different functions that are called on that line.</p>
<p>That line also results in a large amount of memory being allocated and deallocated, which is somewhat suprising: just looking at the code, that line <em>appears</em> to just modify the data in-place, but that’s not actually what’s happening internally.</p>
<p>In the flame graph, you’ll see that some of the flame graph blocks have the label <code>$</code>, which means that those samples were spent in the <code>$</code> function for indexing into an object (in R, the expression <code>x$y</code> is equivalent to <code>`$`(x, &quot;y&quot;)</code>).</p>
<p>Because <code>$</code> is a <em>generic</em> function, it calls the corresponding <em>method</em> for the object, in this case <code>$.data.frame</code>. This function in turn calls <code>[[</code>, which calls <code>[[.data.frame</code>. (Zoom in to see this more clearly.)</p>
<p>Other flame graph cells have the label <code>$&lt;-</code>. The usual syntax for calling this function is <code>x$y &lt;- z</code>; this is equivalent to <code>`$&lt;-`(x, &quot;y&quot;, z)</code>. (Assignment with indexing, as in <code>x$y[i] &lt;- z</code> is actually a bit <a href="http://adv-r.had.co.nz/Functions.html#replacement-functions">more complicated</a>, and it turns out that this is the cause of the excessive memory allocation and deallocation.)</p>
<p>Finally, many of the flame graph cells contain the entire expression from line 6. This can mean one of two things:</p>
<ol style="list-style-type: decimal">
<li>R is currently evaluating the expression but is not inside another function call.</li>
<li>R is in another function, but that function does not show up on the stack. (A number of R’s internal functions do not show up in the profiling data. See <a href="#why-do-some-function-calls-not-show-in-the-profiler">more</a> about this in the FAQ.)</li>
</ol>
<p>This profiling data tells us that much of the time is spent in <code>$</code> and <code>$&lt;-</code>. Maybe avoiding these functions entirely will speed things up. To do that, instead of operating on data frame columns, we can operate on temporary vectors. As it turns out, writing a function that takes a vector as input and returns a vector as output is not only convenient; it provides a natural way of creating temporary variables so that we can avoid calling <code>$</code> and <code>$&lt;-</code> in a loop.</p>
<pre class="r"><code>profvis({
  csum &lt;- function(x) {
    if (length(x) &lt; 2) return(x)

    sum &lt;- x[1]
    for (i in seq(2, length(x))) {
      sum[i] &lt;- sum[i-1] + x[i]
    }
    sum
  }
  data$sum &lt;- csum(data$value)
})</code></pre>
<div id="htmlwidget-4436" style="width:100%;height:320px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-4436">{"x":{"message":{"prof":{"time":[1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,14,14,14,15,15,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,30,30,31,31,32,32,33,33,34,34,35,35,36,36,37,37,38,38,39,39,40,40,41,41,42,42,42,43,43,44,44,45,45,46,46,47,47,48,48,49,49,50,50,51,51,52,52,53,53,54,54,55,55,56,56,57,57,58,58,59,59,60,60,61,61,62,62],"depth":[2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,3,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,3,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1],"label":["for (i in seq(2, length(x))) {","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","<GC>","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum","sum[i] <- sum[i-1] + x[i]","csum"],"filenum":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"linenum":[6,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,null,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,null,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11,7,11],"memalloc":[526.103355407715,526.103355407715,569.841918945312,569.841918945312,637.970306396484,637.970306396484,685.277694702148,685.277694702148,748.966667175293,748.966667175293,795.824234008789,795.824234008789,869.478034973145,869.478034973145,920.259658813477,920.259658813477,996.54167175293,996.54167175293,1046.43157196045,1046.43157196045,1124.434715271,1124.434715271,1177.26906585693,1177.26906585693,1253.61186218262,1253.61186218262,1281.7827911377,1281.7827911377,1281.7827911377,512.559928894043,512.559928894043,563.879943847656,563.879943847656,631.094619750977,631.094619750977,664.130851745605,664.130851745605,728.177391052246,728.177391052246,773.714324951172,773.714324951172,849.179969787598,849.179969787598,900.231941223145,900.231941223145,979.823081970215,979.823081970215,1033.44723510742,1033.44723510742,1109.28464508057,1109.28464508057,1155.64912414551,1155.64912414551,1235.99663543701,1235.99663543701,1268.82050323486,1268.82050323486,480.588356018066,480.588356018066,532.755126953125,532.755126953125,611.163581848145,611.163581848145,664.211555480957,664.211555480957,741.705612182617,741.705612182617,790.494194030762,790.494194030762,858.204444885254,858.204444885254,910.416007995605,910.416007995605,989.364105224609,989.364105224609,1042.51996612549,1042.51996612549,1122.27373504639,1122.27373504639,1175.54815673828,1175.54815673828,1256.334815979,1256.334815979,1281.64830780029,1281.64830780029,1281.64830780029,516.978958129883,516.978958129883,550.841865539551,550.841865539551,598.519683837891,598.519683837891,630.951950073242,630.951950073242,708.901664733887,708.901664733887,757.853897094727,757.853897094727,837.684104919434,837.684104919434,890.508201599121,890.508201599121,970.569046020508,970.569046020508,1024.6323928833,1024.6323928833,1105.25443267822,1105.25443267822,1159.89205169678,1159.89205169678,1192.86339569092,1192.86339569092,1214.57481384277,1214.57481384277,1248.05497741699,1248.05497741699,1270.17755126953,1270.17755126953,484.047325134277,484.047325134277,531.799407958984,531.799407958984,607.253128051758,607.253128051758,658.18342590332,658.18342590332],"meminc":[0,0,43.7385635375977,0,68.1283874511719,0,47.3073883056641,0,63.6889724731445,0,46.8575668334961,0,73.6538009643555,0,50.781623840332,0,76.2820129394531,0,49.8899002075195,0,78.0031433105469,0,52.8343505859375,0,76.3427963256836,0,28.1709289550781,0,0,-769.222862243652,0,51.3200149536133,0,67.2146759033203,0,33.0362319946289,0,64.0465393066406,0,45.5369338989258,0,75.4656448364258,0,51.0519714355469,0,79.5911407470703,0,53.624153137207,0,75.8374099731445,0,46.3644790649414,0,80.3475112915039,0,32.8238677978516,0,-788.232147216797,0,52.1667709350586,0,78.4084548950195,0,53.0479736328125,0,77.4940567016602,0,48.7885818481445,0,67.7102508544922,0,52.2115631103516,0,78.9480972290039,0,53.1558609008789,0,79.7537689208984,0,53.2744216918945,0,80.7866592407227,0,25.3134918212891,0,0,-764.66934967041,0,33.862907409668,0,47.6778182983398,0,32.4322662353516,0,77.9497146606445,0,48.9522323608398,0,79.830207824707,0,52.8240966796875,0,80.0608444213867,0,54.063346862793,0,80.6220397949219,0,54.6376190185547,0,32.9713439941406,0,21.7114181518555,0,33.4801635742188,0,22.1225738525391,0,-786.130226135254,0,47.752082824707,0,75.4537200927734,0,50.9302978515625,0],"filename":["<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>","<expr>"]},"interval":10,"files":[{"filename":"<expr>","content":"profvis({\n  csum <- function(x) {\n    if (length(x) < 2) return(x)\n\n    sum <- x[1]\n    for (i in seq(2, length(x))) {\n      sum[i] <- sum[i-1] + x[i]\n    }\n    sum\n  }\n  data$sum <- csum(data$value)\n})","normpath":"<expr>"}],"prof_output":"/tmp/Rtmpr7ph7T/file1f7766a86b6e.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"v"}},"evals":[],"jsHooks":[]}</script>
<p>Using this <code>csum</code> function, it takes just over half a second, which is about 4x as fast as before.</p>
<p>It may appear that no functions are called from line 7, but that’s not quite true: that line also calls <code>[</code>, <code>[&lt;-</code>, <code>-</code>, and <code>+</code>.</p>
<ul>
<li>The <code>[</code> and <code>[&lt;-</code> functions don’t appear in the flame graph. They are internal R functions which contain C code to handle indexing into atomic vectors, and are not dispatched to methods. (Contrast this with the first version of the code, where <code>$</code> was dispatched to <code>$.data.frame</code>).</li>
<li>The <code>-</code> and <code>+</code> functions can show up in a flame graph, but they are very fast so the sampling profiler may or may not happen to take a sample when they’re on the call stack.</li>
</ul>
<p>The code panel shows that there is still a large amount of memory being allocated in the <code>csum</code> function. In the flame graph. you probably have noticed the gray blocks labeled <code>&lt;GC&gt;</code>. These represent times where R is doing <em>garbage collection</em> – that is, when it is freeing (deallocating) chunks of memory that were allocated but no longer needed. If R is spending a lot of time freeing memory, that suggests that R is also spending a lot of time allocating memory. This is another common source of slowness in R code.</p>
<p>In the <code>csum</code> function, <code>sum</code> starts as a length-1 vector, and then grows, in a loop, to be the same length as <code>x</code>. Every time a vector grows, R allocates a new block of memory for the new, larger vector, and then copies the contents over. The memory allocated for the old vector is no longer needed, and will later be garbage collected.</p>
<p>To avoid all that memory allocation, copying, and garbage collection, we can pre-allocate a correctly-sized vector for <code>sum</code>. For this data, that will result in 29,999 fewer allocations, copies, and deallocations.</p>
<pre class="r"><code>profvis({
  csum2 &lt;- function(x) {
    if (length(x) &lt; 2) return(x)

    sum &lt;- numeric(length(x))  # Preallocate
    sum[1] &lt;- x[1]
    for (i in seq(2, length(x))) {
      sum[i] &lt;- sum[i-1] + x[i]
    }
    sum
  }
  data$sum &lt;- csum2(data$value)
})</code></pre>
<div id="htmlwidget-9994" style="width:100%;height:350px;" class="profvis html-widget"></div>
<script type="application/json" data-for="htmlwidget-9994">{"x":{"message":{"prof":{"time":[1,1,2,2,3,3,4,4,4],"depth":[2,1,2,1,2,1,3,2,1],"label":["sum[i] <- sum[i-1] + x[i]","csum2","sum[i] <- sum[i-1] + x[i]","csum2","sum[i] <- sum[i-1] + x[i]","csum2","<GC>","sum[i] <- sum[i-1] + x[i]","csum2"],"filenum":[1,1,1,1,1,1,null,1,1],"linenum":[8,12,8,12,8,12,null,8,12],"memalloc":[474.500991821289,474.500991821289,474.638023376465,474.638023376465,474.81689453125,474.81689453125,474.901565551758,474.901565551758,474.901565551758],"meminc":[0,0,0.137031555175781,0,0.178871154785156,0,0.0846710205078125,0,0],"filename":["<expr>","<expr>","<expr>","<expr>","<expr>","<expr>",null,"<expr>","<expr>"]},"interval":10,"files":[{"filename":"<expr>","content":"profvis({\n  csum2 <- function(x) {\n    if (length(x) < 2) return(x)\n\n    sum <- numeric(length(x))  # Preallocate\n    sum[1] <- x[1]\n    for (i in seq(2, length(x))) {\n      sum[i] <- sum[i-1] + x[i]\n    }\n    sum\n  }\n  data$sum <- csum2(data$value)\n})","normpath":"<expr>"}],"prof_output":"/tmp/Rtmpr7ph7T/file1f777d3b1094.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"v"}},"evals":[],"jsHooks":[]}</script>
<p>This version of the code, with <code>csum2</code>, is around 60x faster than our original code, and requires almost no memory allocation. These performance improvements were possible by avoiding calls to <code>$</code> and <code>$&lt;-</code>, and by avoiding unnecessary memory allocation and copying from growing a vector in a loop.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
